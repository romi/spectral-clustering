
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Spectral Clustering documentation.">
      
      
        <meta name="author" content="ROMI Team">
      
      
        <link rel="canonical" href="https://romi.github.io/spectral-clustering/reference/spectral_clustering/quotientgraph_semantics/">
      
      
        <link rel="prev" href="../quotientgraph_operations/">
      
      
        <link rel="next" href="../segmentation_algorithms/">
      
      
      <link rel="icon" href="../../../assets/images/ROMI_ICON_green.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>quotientgraph_semantics - SpectralClustering</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Nunito Sans";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spectral_clustering.quotientgraph_semantics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://romi.github.io/spectral-clustering/" title="SpectralClustering" class="md-header__button md-logo" aria-label="SpectralClustering" data-md-component="logo">
      
  <img src="../../../assets/images/ROMI_logo_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SpectralClustering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              quotientgraph_semantics
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/romi/spectral-clustering" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../dev/" class="md-tabs__link">
        
  
    
  
  Developers

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Reference API

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://romi.github.io/spectral-clustering/" title="SpectralClustering" class="md-nav__button md-logo" aria-label="SpectralClustering" data-md-component="logo">
      
  <img src="../../../assets/images/ROMI_logo_white.svg" alt="logo">

    </a>
    SpectralClustering
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/romi/spectral-clustering" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    spectral_clustering
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            spectral_clustering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Segmentation_Dijkstra_litt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Segmentation_Dijkstra_litt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Viterbi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viterbi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../branching_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    branching_graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../constraint_program/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    constraint_program
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dijkstra_segmentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dijkstra_segmentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../display_and_export/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    display_and_export
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../point_cloud_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_cloud_graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quotient_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quotient_graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quotientgraph_operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quotientgraph_operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    quotientgraph_semantics
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    quotientgraph_semantics
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics" class="md-nav__link">
    <span class="md-ellipsis">
      quotientgraph_semantics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.define_leaves_by_topo" class="md-nav__link">
    <span class="md-ellipsis">
      define_leaves_by_topo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.define_semantic_classes" class="md-nav__link">
    <span class="md-ellipsis">
      define_semantic_classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.define_semantic_scores" class="md-nav__link">
    <span class="md-ellipsis">
      define_semantic_scores
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem" class="md-nav__link">
    <span class="md-ellipsis">
      determination_main_stem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem_shortest_paths" class="md-nav__link">
    <span class="md-ellipsis">
      determination_main_stem_shortest_paths
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem_shortest_paths_improved" class="md-nav__link">
    <span class="md-ellipsis">
      determination_main_stem_shortest_paths_improved
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.differenciate_apex_limb" class="md-nav__link">
    <span class="md-ellipsis">
      differenciate_apex_limb
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.maj_weight_semantics" class="md-nav__link">
    <span class="md-ellipsis">
      maj_weight_semantics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.merge_remaining_clusters" class="md-nav__link">
    <span class="md-ellipsis">
      merge_remaining_clusters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.minimum_spanning_tree_quotientgraph_semantics" class="md-nav__link">
    <span class="md-ellipsis">
      minimum_spanning_tree_quotientgraph_semantics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.remove_edges_useful_paths" class="md-nav__link">
    <span class="md-ellipsis">
      remove_edges_useful_paths
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.shortest_paths_from_apex_det_branch" class="md-nav__link">
    <span class="md-ellipsis">
      shortest_paths_from_apex_det_branch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.shortest_paths_from_limbs_det_petiol" class="md-nav__link">
    <span class="md-ellipsis">
      shortest_paths_from_limbs_det_petiol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.stem_detection_with_quotite_leaves" class="md-nav__link">
    <span class="md-ellipsis">
      stem_detection_with_quotite_leaves
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.topology_control" class="md-nav__link">
    <span class="md-ellipsis">
      topology_control
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.treat_topology_error" class="md-nav__link">
    <span class="md-ellipsis">
      treat_topology_error
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.weight_with_semantic" class="md-nav__link">
    <span class="md-ellipsis">
      weight_with_semantic
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../segmentation_algorithms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    segmentation_algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../similarity_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    similarity_graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../split_and_merge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    split_and_merge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topological_energy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    topological_energy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_16" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../utils/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    utils
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_16" id="__nav_3_1_16_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_16">
            <span class="md-nav__icon md-icon"></span>
            utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/angle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    angle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/size/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    size
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/sparse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sparse
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics" class="md-nav__link">
    <span class="md-ellipsis">
      quotientgraph_semantics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.define_leaves_by_topo" class="md-nav__link">
    <span class="md-ellipsis">
      define_leaves_by_topo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.define_semantic_classes" class="md-nav__link">
    <span class="md-ellipsis">
      define_semantic_classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.define_semantic_scores" class="md-nav__link">
    <span class="md-ellipsis">
      define_semantic_scores
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem" class="md-nav__link">
    <span class="md-ellipsis">
      determination_main_stem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem_shortest_paths" class="md-nav__link">
    <span class="md-ellipsis">
      determination_main_stem_shortest_paths
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem_shortest_paths_improved" class="md-nav__link">
    <span class="md-ellipsis">
      determination_main_stem_shortest_paths_improved
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.differenciate_apex_limb" class="md-nav__link">
    <span class="md-ellipsis">
      differenciate_apex_limb
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.maj_weight_semantics" class="md-nav__link">
    <span class="md-ellipsis">
      maj_weight_semantics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.merge_remaining_clusters" class="md-nav__link">
    <span class="md-ellipsis">
      merge_remaining_clusters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.minimum_spanning_tree_quotientgraph_semantics" class="md-nav__link">
    <span class="md-ellipsis">
      minimum_spanning_tree_quotientgraph_semantics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.remove_edges_useful_paths" class="md-nav__link">
    <span class="md-ellipsis">
      remove_edges_useful_paths
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.shortest_paths_from_apex_det_branch" class="md-nav__link">
    <span class="md-ellipsis">
      shortest_paths_from_apex_det_branch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.shortest_paths_from_limbs_det_petiol" class="md-nav__link">
    <span class="md-ellipsis">
      shortest_paths_from_limbs_det_petiol
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.stem_detection_with_quotite_leaves" class="md-nav__link">
    <span class="md-ellipsis">
      stem_detection_with_quotite_leaves
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.topology_control" class="md-nav__link">
    <span class="md-ellipsis">
      topology_control
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.treat_topology_error" class="md-nav__link">
    <span class="md-ellipsis">
      treat_topology_error
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.quotientgraph_semantics.weight_with_semantic" class="md-nav__link">
    <span class="md-ellipsis">
      weight_with_semantic
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>quotientgraph_semantics</h1>

<div class="doc doc-object doc-module">



<a id="spectral_clustering.quotientgraph_semantics"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.define_leaves_by_topo" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">define_leaves_by_topo</span>


<a href="#spectral_clustering.quotientgraph_semantics.define_leaves_by_topo" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>define_leaves_by_topo(quotientgraph)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Defines the leaves of a quotient graph based on topological structure and selects
a root node based on specific node attributes.</p>
<p>This function identifies "end" nodes (leaves) of the graph and computes a
mean gradient value for each leaf node based on the associated nodes' gradient
attributes from the base graph. The root node is randomly selected from the
leaves, although it could optionally be chosen as the node with the highest
mean gradient.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph structure representing a simplified version of the
point cloud graph. Nodes in this graph contain attributes, and the graph
is connected to the underlying detailed structure of the point cloud
graph.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">36</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">37</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">38</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">39</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">40</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">41</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">42</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">43</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">44</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">45</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">46</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">47</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">48</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">49</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">50</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">51</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">52</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">53</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">54</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">55</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">56</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">57</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">58</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">59</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">60</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">define_leaves_by_topo</span>(quotientgraph):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Defines the leaves of a quotient graph based on topological structure and selects</span>
<span style="color: #BA2121; font-style: italic">    a root node based on specific node attributes.</span>

<span style="color: #BA2121; font-style: italic">    This function identifies &quot;end&quot; nodes (leaves) of the graph and computes a</span>
<span style="color: #BA2121; font-style: italic">    mean gradient value for each leaf node based on the associated nodes&#39; gradient</span>
<span style="color: #BA2121; font-style: italic">    attributes from the base graph. The root node is randomly selected from the</span>
<span style="color: #BA2121; font-style: italic">    leaves, although it could optionally be chosen as the node with the highest</span>
<span style="color: #BA2121; font-style: italic">    mean gradient.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph structure representing a simplified version of the</span>
<span style="color: #BA2121; font-style: italic">        point cloud graph. Nodes in this graph contain attributes, and the graph</span>
<span style="color: #BA2121; font-style: italic">        is connected to the underlying detailed structure of the point cloud</span>
<span style="color: #BA2121; font-style: italic">        graph.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    G <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>point_cloud_graph
    <span style="color: #3D7B7B; font-style: italic"># Put the &quot;end&quot; nodes in a list</span>
    list_leaves <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>nodes() <span style="color: #008000; font-weight: bold">if</span> quotientgraph<span style="color: #666">.</span>degree(x) <span style="color: #666">==</span> <span style="color: #666">1</span>]

    <span style="color: #3D7B7B; font-style: italic"># Pick the node with the most average norm gradient (most likely to be part of the stem)</span>
    max_norm <span style="color: #666">=</span> <span style="color: #666">0</span>
    max_norm_node <span style="color: #666">=</span> <span style="color: #666">-1</span>
    <span style="color: #008000; font-weight: bold">for</span> l <span style="color: #A2F; font-weight: bold">in</span> list_leaves:
        quotientgraph<span style="color: #666">.</span>nodes[l][<span style="color: #BA2121">&#39;norm_gradient_mean&#39;</span>] <span style="color: #666">=</span> <span style="color: #666">0</span>
        list_of_nodes_in_qnode <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> l]
        <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> list_of_nodes_in_qnode:
            quotientgraph<span style="color: #666">.</span>nodes[l][<span style="color: #BA2121">&#39;norm_gradient_mean&#39;</span>] <span style="color: #666">+=</span> G<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;norm_gradient&#39;</span>]
        quotientgraph<span style="color: #666">.</span>nodes[l][<span style="color: #BA2121">&#39;norm_gradient_mean&#39;</span>] <span style="color: #666">/=</span> <span style="color: #008000">len</span>(list_of_nodes_in_qnode)
        <span style="color: #008000; font-weight: bold">if</span> quotientgraph<span style="color: #666">.</span>nodes[l][<span style="color: #BA2121">&#39;norm_gradient_mean&#39;</span>] <span style="color: #666">&gt;</span> max_norm:
            max_norm <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>nodes[l][<span style="color: #BA2121">&#39;norm_gradient_mean&#39;</span>]
            max_norm_node <span style="color: #666">=</span> l

    <span style="color: #3D7B7B; font-style: italic"># Finally I chose randomly the root among the leaves but I could choose the max_norm_node</span>
    root <span style="color: #666">=</span> np<span style="color: #666">.</span>random<span style="color: #666">.</span>choice(list_leaves)
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.define_semantic_classes" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">define_semantic_classes</span>


<a href="#spectral_clustering.quotientgraph_semantics.define_semantic_classes" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>define_semantic_classes(quotientgraph)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Assigns semantic labels to nodes in a quotient graph.</p>
<p>Given a quotient graph, this function classifies its nodes into three semantic classes:
'leaf', 'stem', and 'petiole'.
Nodes with a single adjacency are labeled as 'leaf'.
The node with the highest number of neighbors is labeled as 'stem'.
All other nodes are classified as 'petiole'.
The function directly modifies the quotient graph by adding a 'semantic_label' attribute with the
appropriate class to each node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>A quotient graph where each node represents an abstract entity, and its
edges define connections between these entities.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 72</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 73</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 74</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 75</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 76</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 77</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 78</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 79</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 80</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 81</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 82</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 83</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 84</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 85</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 86</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 87</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 88</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 89</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 90</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 91</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 92</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 93</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 94</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 95</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 96</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 97</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 98</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 99</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">100</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">101</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">102</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">103</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">define_semantic_classes</span>(quotientgraph):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Assigns semantic labels to nodes in a quotient graph.</span>

<span style="color: #BA2121; font-style: italic">    Given a quotient graph, this function classifies its nodes into three semantic classes:</span>
<span style="color: #BA2121; font-style: italic">    &#39;leaf&#39;, &#39;stem&#39;, and &#39;petiole&#39;.</span>
<span style="color: #BA2121; font-style: italic">    Nodes with a single adjacency are labeled as &#39;leaf&#39;.</span>
<span style="color: #BA2121; font-style: italic">    The node with the highest number of neighbors is labeled as &#39;stem&#39;.</span>
<span style="color: #BA2121; font-style: italic">    All other nodes are classified as &#39;petiole&#39;.</span>
<span style="color: #BA2121; font-style: italic">    The function directly modifies the quotient graph by adding a &#39;semantic_label&#39; attribute with the</span>
<span style="color: #BA2121; font-style: italic">    appropriate class to each node.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        A quotient graph where each node represents an abstract entity, and its</span>
<span style="color: #BA2121; font-style: italic">        edges define connections between these entities.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    <span style="color: #3D7B7B; font-style: italic"># leaves : one adjacency</span>
    list_leaves <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>nodes() <span style="color: #008000; font-weight: bold">if</span> quotientgraph<span style="color: #666">.</span>degree(x) <span style="color: #666">==</span> <span style="color: #666">1</span>]

    <span style="color: #3D7B7B; font-style: italic"># the node with the most number of neighborhood is the stem</span>
    degree_sorted <span style="color: #666">=</span> <span style="color: #008000">sorted</span>(quotientgraph<span style="color: #666">.</span>degree, key<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">lambda</span> x: x[<span style="color: #666">1</span>], reverse<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>)
    stem <span style="color: #666">=</span> [degree_sorted[<span style="color: #666">0</span>][<span style="color: #666">0</span>]]

    <span style="color: #3D7B7B; font-style: italic"># the rest is defined as branches</span>
    <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>nodes:
        <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #A2F; font-weight: bold">in</span> list_leaves:
            quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;semantic_label&#39;</span>] <span style="color: #666">=</span> <span style="color: #BA2121">&#39;leaf&#39;</span>
        <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #A2F; font-weight: bold">in</span> stem:
            quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;semantic_label&#39;</span>] <span style="color: #666">=</span> <span style="color: #BA2121">&#39;stem&#39;</span>
        <span style="color: #008000; font-weight: bold">elif</span> n <span style="color: #A2F; font-weight: bold">not</span> <span style="color: #A2F; font-weight: bold">in</span> list_leaves <span style="color: #A2F; font-weight: bold">and</span> n <span style="color: #A2F; font-weight: bold">not</span> <span style="color: #A2F; font-weight: bold">in</span> stem:
            quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;semantic_label&#39;</span>] <span style="color: #666">=</span> <span style="color: #BA2121">&#39;petiole&#39;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.define_semantic_scores" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">define_semantic_scores</span>


<a href="#spectral_clustering.quotientgraph_semantics.define_semantic_scores" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>define_semantic_scores(quotientgraph, method<span style="color: #666">=</span><span style="color: #BA2121">&#39;similarity_dist&#39;</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Defines semantic scores for nodes in the quotient graph based on specific methods.</p>
<p>This function computes the semantic scores for each node in the quotient graph
based on either a condition-based logic or a similarity distance approach. The
method determines how the scores are calculated and applied to the nodes. Scores
are computed for three categories: <code>leaf</code>, <code>petiole</code>, and <code>stem</code>. The method
'includes intermediate computation and smoothstep/identity transformations for
distances or direct logical conditions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>A quotient graph object which contains nodes and related descriptors
such as planarity, linearity, silhouette, and degree. The graph structure
and attributes are utilized to compute semantic scores for each node.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>method</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;similarity_dist&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The scoring method to be used. Defaults to 'similarity_dist'.
Options include:</p>
<ul>
<li>'condition_list': Evaluates descriptive conditions on graph node properties.</li>
<li>'similarity_dist': Computes similarity based on a reference score vector
    using Euclidean distances and applies smoothstep or identity transformations.</li>
</ul>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">106</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">107</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">108</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">109</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">110</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">111</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">112</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">113</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">114</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">115</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">116</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">117</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">118</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">119</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">120</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">121</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">122</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">123</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">124</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">125</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">126</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">127</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">128</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">129</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">130</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">131</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">132</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">133</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">134</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">135</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">136</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">137</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">138</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">139</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">140</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">141</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">142</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">143</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">144</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">145</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">146</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">147</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">148</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">149</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">150</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">151</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">152</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">153</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">154</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">155</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">156</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">157</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">158</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">159</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">160</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">161</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">162</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">163</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">164</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">165</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">166</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">167</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">168</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">169</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">170</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">171</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">172</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">173</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">174</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">175</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">176</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">177</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">178</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">179</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">180</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">181</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">182</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">183</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">define_semantic_scores</span>(quotientgraph, method<span style="color: #666">=</span><span style="color: #BA2121">&#39;similarity_dist&#39;</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Defines semantic scores for nodes in the quotient graph based on specific methods.</span>

<span style="color: #BA2121; font-style: italic">    This function computes the semantic scores for each node in the quotient graph</span>
<span style="color: #BA2121; font-style: italic">    based on either a condition-based logic or a similarity distance approach. The</span>
<span style="color: #BA2121; font-style: italic">    method determines how the scores are calculated and applied to the nodes. Scores</span>
<span style="color: #BA2121; font-style: italic">    are computed for three categories: `leaf`, `petiole`, and `stem`. The method</span>
<span style="color: #BA2121; font-style: italic">    &#39;includes intermediate computation and smoothstep/identity transformations for</span>
<span style="color: #BA2121; font-style: italic">    distances or direct logical conditions.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        A quotient graph object which contains nodes and related descriptors</span>
<span style="color: #BA2121; font-style: italic">        such as planarity, linearity, silhouette, and degree. The graph structure</span>
<span style="color: #BA2121; font-style: italic">        and attributes are utilized to compute semantic scores for each node.</span>
<span style="color: #BA2121; font-style: italic">    method : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The scoring method to be used. Defaults to &#39;similarity_dist&#39;.</span>
<span style="color: #BA2121; font-style: italic">        Options include:</span>

<span style="color: #BA2121; font-style: italic">          - &#39;condition_list&#39;: Evaluates descriptive conditions on graph node properties.</span>
<span style="color: #BA2121; font-style: italic">          - &#39;similarity_dist&#39;: Computes similarity based on a reference score vector</span>
<span style="color: #BA2121; font-style: italic">            using Euclidean distances and applies smoothstep or identity transformations.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    quotientgraph<span style="color: #666">.</span>compute_local_descriptors(quotientgraph<span style="color: #666">.</span>point_cloud_graph, method<span style="color: #666">=</span><span style="color: #BA2121">&#39;all_qg_cluster&#39;</span>, data<span style="color: #666">=</span><span style="color: #BA2121">&#39;coords&#39;</span>)
    quotientgraph<span style="color: #666">.</span>compute_silhouette()
    degree_sorted <span style="color: #666">=</span> <span style="color: #008000">sorted</span>(quotientgraph<span style="color: #666">.</span>degree, key<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">lambda</span> x: x[<span style="color: #666">1</span>], reverse<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>)
    stem <span style="color: #666">=</span> [degree_sorted[<span style="color: #666">0</span>][<span style="color: #666">0</span>]]

    <span style="color: #008000; font-weight: bold">if</span> method <span style="color: #666">==</span> <span style="color: #BA2121">&#39;condition_list&#39;</span>:
        <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>nodes:
            score_vector_leaf <span style="color: #666">=</span> [quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;planarity&#39;</span>] <span style="color: #666">&gt;</span> <span style="color: #666">0.5</span>, quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;linearity&#39;</span>] <span style="color: #666">&lt;</span> <span style="color: #666">0.5</span>,
                                 quotientgraph<span style="color: #666">.</span>degree(n) <span style="color: #666">==</span> <span style="color: #666">1</span>]
            score_vector_petiole <span style="color: #666">=</span> [quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;planarity&#39;</span>] <span style="color: #666">&lt;</span> <span style="color: #666">0.5</span>,
                                    quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;linearity&#39;</span>] <span style="color: #666">&gt;</span> <span style="color: #666">0.5</span>, quotientgraph<span style="color: #666">.</span>degree(n) <span style="color: #666">==</span> <span style="color: #666">2</span>,
                                    quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;silhouette&#39;</span>] <span style="color: #666">&gt;</span> <span style="color: #666">0.2</span>]
            score_vector_stem <span style="color: #666">=</span> [quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;planarity&#39;</span>] <span style="color: #666">&lt;</span> <span style="color: #666">0.5</span>, quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;linearity&#39;</span>] <span style="color: #666">&gt;</span> <span style="color: #666">0.5</span>,
                                 quotientgraph<span style="color: #666">.</span>degree(n) <span style="color: #666">==</span> degree_sorted[<span style="color: #666">0</span>][<span style="color: #666">1</span>]]
            quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;score_leaf&#39;</span>] <span style="color: #666">=</span> score_vector_leaf<span style="color: #666">.</span>count(<span style="color: #008000; font-weight: bold">True</span>) <span style="color: #666">/</span> <span style="color: #008000">len</span>(score_vector_leaf)
            quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;score_petiole&#39;</span>] <span style="color: #666">=</span> score_vector_petiole<span style="color: #666">.</span>count(<span style="color: #008000; font-weight: bold">True</span>) <span style="color: #666">/</span> <span style="color: #008000">len</span>(score_vector_petiole)
            quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;score_stem&#39;</span>] <span style="color: #666">=</span> score_vector_stem<span style="color: #666">.</span>count(<span style="color: #008000; font-weight: bold">True</span>) <span style="color: #666">/</span> <span style="color: #008000">len</span>(score_vector_stem)

    <span style="color: #008000; font-weight: bold">if</span> method <span style="color: #666">==</span> <span style="color: #BA2121">&#39;similarity_dist&#39;</span>:
        <span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">smoothstep</span>(x):
            <span style="color: #008000; font-weight: bold">if</span> x <span style="color: #666">&lt;=</span> <span style="color: #666">0</span>:
                res <span style="color: #666">=</span> <span style="color: #666">0</span>
            <span style="color: #008000; font-weight: bold">elif</span> x <span style="color: #666">&gt;=</span> <span style="color: #666">1</span>:
                res <span style="color: #666">=</span> <span style="color: #666">1</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                res <span style="color: #666">=</span> <span style="color: #666">3</span> <span style="color: #666">*</span> <span style="color: #008000">pow</span>(x, <span style="color: #666">2</span>) <span style="color: #666">-</span> <span style="color: #666">2</span> <span style="color: #666">*</span> <span style="color: #008000">pow</span>(x, <span style="color: #666">3</span>)

            <span style="color: #008000; font-weight: bold">return</span> res

        <span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">identity</span>(x):
            <span style="color: #008000; font-weight: bold">if</span> x <span style="color: #666">&lt;=</span> <span style="color: #666">0</span>:
                res <span style="color: #666">=</span> <span style="color: #666">0</span>
            <span style="color: #008000; font-weight: bold">elif</span> x <span style="color: #666">&gt;=</span> <span style="color: #666">1</span>:
                res <span style="color: #666">=</span> <span style="color: #666">1</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                res <span style="color: #666">=</span> x

            <span style="color: #008000; font-weight: bold">return</span> res

        score_vector_leaf_ref <span style="color: #666">=</span> [<span style="color: #666">0.81</span>, <span style="color: #666">0</span>, <span style="color: #666">-0.1</span>]
        score_vector_linea_ref <span style="color: #666">=</span> [<span style="color: #666">0</span>, <span style="color: #666">1</span>, <span style="color: #666">0.3</span>]
        <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>nodes:
            <span style="color: #3D7B7B; font-style: italic"># score_vector_n = sk.preprocessing.normalize(np.asarray([QG.nodes[n][&#39;planarity&#39;], QG.nodes[n][&#39;linearity&#39;]]).reshape(1,len(score_vector_leaf_ref)), norm=&#39;l2&#39;)</span>
            score_vector_n <span style="color: #666">=</span> [quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;planarity&#39;</span>], quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;linearity&#39;</span>],
                              quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;silhouette&#39;</span>]]
            <span style="color: #008000">print</span>(score_vector_n)
            d1_leaf <span style="color: #666">=</span> sp<span style="color: #666">.</span>spatial<span style="color: #666">.</span>distance<span style="color: #666">.</span>euclidean(score_vector_leaf_ref, score_vector_n)
            <span style="color: #3D7B7B; font-style: italic"># print(d1_leaf)</span>
            d2_linea <span style="color: #666">=</span> sp<span style="color: #666">.</span>spatial<span style="color: #666">.</span>distance<span style="color: #666">.</span>euclidean(score_vector_linea_ref, score_vector_n)
            <span style="color: #3D7B7B; font-style: italic"># print(d2_leaf)</span>
            f1 <span style="color: #666">=</span> <span style="color: #666">1</span> <span style="color: #666">-</span> d1_leaf
            f2 <span style="color: #666">=</span> <span style="color: #666">1</span> <span style="color: #666">-</span> d2_linea
            quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;score_leaf&#39;</span>] <span style="color: #666">=</span> identity(f1)
            quotientgraph<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;score_petiole&#39;</span>] <span style="color: #666">=</span> identity(f2)
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.determination_main_stem" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">determination_main_stem</span>


<a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>determination_main_stem(QG, list_of_linear_QG_nodes, stemroot, list_leaves, angle_to_stop<span style="color: #666">=45</span>, new_viterbi_class_number<span style="color: #666">=3</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determines the main stem of a Quotient Graph (QG) starting from a stem root, facilitated
by directional and angular constraints. Updates the viterbi classification for the identified
stem nodes in both the QG and the associated point cloud graph.</p>
<p>The function iteratively identifies the stem path by minimizing energy values (dot products
of edge vectors). The traversal stops either when the energy threshold (<code>angle_to_stop</code>) is
exceeded or if the next node is not part of the predefined QG linear nodes. Additionally,
the function assigns the provided viterbi class number to all nodes in the identified stem.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The input Quotient Graph where directional and viterbi classifications are computed.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_of_linear_QG_nodes</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
          –
          <div class="doc-md-description">
            <p>A list of node identifiers in the Quotient Graph representing the linear structural
nodes of interest.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>stemroot</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a> or <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>Identifier of the starting node for the stem determination process in the Quotient Graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_leaves</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
          –
          <div class="doc-md-description">
            <p>List of leaf node identifiers in the Quotient Graph used for directional computation.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>angle_to_stop</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>45</code>
)
          –
          <div class="doc-md-description">
            <p>Angular threshold (in degrees) to determine when to stop the stem traversal.
Defaults to <code>45</code> degrees.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>new_viterbi_class_number</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>The viterbi classification number assigned to identified stem nodes in both the Quotient
Graph and the point cloud graph. Defaults to <code>3</code>.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">224</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">225</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">226</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">227</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">228</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">229</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">230</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">231</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">232</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">233</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">234</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">235</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">236</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">237</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">238</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">239</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">240</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">241</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">242</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">243</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">244</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">245</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">246</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">247</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">248</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">249</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">250</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">251</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">252</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">253</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">254</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">255</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">256</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">257</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">258</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">259</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">260</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">261</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">262</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">263</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">264</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">265</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">266</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">267</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">268</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">269</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">270</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">271</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">272</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">273</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">274</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">275</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">276</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">277</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">278</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">279</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">280</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">281</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">282</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">283</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">determination_main_stem</span>(QG, list_of_linear_QG_nodes, stemroot, list_leaves, angle_to_stop<span style="color: #666">=45</span>,
                            new_viterbi_class_number<span style="color: #666">=3</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Determines the main stem of a Quotient Graph (QG) starting from a stem root, facilitated</span>
<span style="color: #BA2121; font-style: italic">    by directional and angular constraints. Updates the viterbi classification for the identified</span>
<span style="color: #BA2121; font-style: italic">    stem nodes in both the QG and the associated point cloud graph.</span>

<span style="color: #BA2121; font-style: italic">    The function iteratively identifies the stem path by minimizing energy values (dot products</span>
<span style="color: #BA2121; font-style: italic">    of edge vectors). The traversal stops either when the energy threshold (`angle_to_stop`) is</span>
<span style="color: #BA2121; font-style: italic">    exceeded or if the next node is not part of the predefined QG linear nodes. Additionally,</span>
<span style="color: #BA2121; font-style: italic">    the function assigns the provided viterbi class number to all nodes in the identified stem.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The input Quotient Graph where directional and viterbi classifications are computed.</span>
<span style="color: #BA2121; font-style: italic">    list_of_linear_QG_nodes : list</span>
<span style="color: #BA2121; font-style: italic">        A list of node identifiers in the Quotient Graph representing the linear structural</span>
<span style="color: #BA2121; font-style: italic">        nodes of interest.</span>
<span style="color: #BA2121; font-style: italic">    stemroot : int or str</span>
<span style="color: #BA2121; font-style: italic">        Identifier of the starting node for the stem determination process in the Quotient Graph.</span>
<span style="color: #BA2121; font-style: italic">    list_leaves : list</span>
<span style="color: #BA2121; font-style: italic">        List of leaf node identifiers in the Quotient Graph used for directional computation.</span>
<span style="color: #BA2121; font-style: italic">    angle_to_stop : float, optional</span>
<span style="color: #BA2121; font-style: italic">        Angular threshold (in degrees) to determine when to stop the stem traversal.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to ``45`` degrees.</span>
<span style="color: #BA2121; font-style: italic">    new_viterbi_class_number : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The viterbi classification number assigned to identified stem nodes in both the Quotient</span>
<span style="color: #BA2121; font-style: italic">        Graph and the point cloud graph. Defaults to ``3``.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    QG<span style="color: #666">.</span>compute_direction_info(list_leaves<span style="color: #666">=</span>list_leaves)
    G <span style="color: #666">=</span> QG<span style="color: #666">.</span>point_cloud_graph
    energy_to_stop <span style="color: #666">=</span> <span style="color: #666">1</span> <span style="color: #666">-</span> np<span style="color: #666">.</span>cos(np<span style="color: #666">.</span>radians(angle_to_stop))
    keepgoing <span style="color: #666">=</span> <span style="color: #008000; font-weight: bold">True</span>
    node_stem <span style="color: #666">=</span> stemroot
    list_stem <span style="color: #666">=</span> []
    list_stem<span style="color: #666">.</span>append(node_stem)
    <span style="color: #008000; font-weight: bold">while</span> keepgoing:
        list_energies <span style="color: #666">=</span> []
        list_nodes <span style="color: #666">=</span> []
        <span style="color: #008000">print</span>(node_stem)
        <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> QG[node_stem]:
            <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #A2F; font-weight: bold">not</span> <span style="color: #A2F; font-weight: bold">in</span> list_stem:
                list_energies<span style="color: #666">.</span>append(QG<span style="color: #666">.</span>edges[(n, node_stem)][<span style="color: #BA2121">&#39;energy_dot_product&#39;</span>])
                list_nodes<span style="color: #666">.</span>append(n)
        node <span style="color: #666">=</span> list_energies<span style="color: #666">.</span>index(<span style="color: #008000">min</span>(list_energies))
        node_stem <span style="color: #666">=</span> list_nodes[node]
        <span style="color: #008000; font-weight: bold">if</span> list_nodes:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">min</span>(list_energies) <span style="color: #666">&gt;</span> energy_to_stop <span style="color: #A2F; font-weight: bold">or</span> node_stem <span style="color: #A2F; font-weight: bold">not</span> <span style="color: #A2F; font-weight: bold">in</span> list_of_linear_QG_nodes:
                keepgoing <span style="color: #666">=</span> <span style="color: #008000; font-weight: bold">False</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                list_stem<span style="color: #666">.</span>append(node_stem)
        <span style="color: #008000; font-weight: bold">else</span>:
            keepgoing <span style="color: #A2F; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">False</span>

    <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> list_stem:
        QG<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;viterbi_class&#39;</span>] <span style="color: #666">=</span> new_viterbi_class_number
        list_gnode <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> n]
        <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> list_gnode:
            G<span style="color: #666">.</span>nodes[i][<span style="color: #BA2121">&#39;viterbi_class&#39;</span>] <span style="color: #666">=</span> new_viterbi_class_number
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.determination_main_stem_shortest_paths" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">determination_main_stem_shortest_paths</span>


<a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem_shortest_paths" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>determination_main_stem_shortest_paths(QG, list_of_linear_QG_nodes)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determines the shortest paths for the main stem using the quotient graph (QG).</p>
<p>This function identifies and processes key nodes in the quotient graph (QG) and
marks their corresponding nodes in the point cloud graph with a specific class.
It uses the Sub-Riemannian graph derived from the QG to compute the traversed
clusters and identifies the main stem's shortest paths within the graph structure.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph representing the higher-level graph structure, which includes
nodes and edges used for the analysis.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_of_linear_QG_nodes</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
          –
          <div class="doc-md-description">
            <p>A list of nodes from the quotient graph that defines the linear paths to focus on.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>
          –
          <div class="doc-md-description">
            <p>A deduplicated list of quotient graph nodes traversed by the shortest paths of the main stem.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">286</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">287</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">288</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">289</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">290</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">291</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">292</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">293</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">294</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">295</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">296</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">297</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">298</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">299</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">300</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">301</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">302</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">303</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">304</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">305</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">306</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">307</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">308</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">309</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">310</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">311</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">312</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">313</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">314</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">315</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">316</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">317</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">318</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">319</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">320</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">determination_main_stem_shortest_paths</span>(QG, list_of_linear_QG_nodes):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Determines the shortest paths for the main stem using the quotient graph (QG).</span>

<span style="color: #BA2121; font-style: italic">    This function identifies and processes key nodes in the quotient graph (QG) and</span>
<span style="color: #BA2121; font-style: italic">    marks their corresponding nodes in the point cloud graph with a specific class.</span>
<span style="color: #BA2121; font-style: italic">    It uses the Sub-Riemannian graph derived from the QG to compute the traversed</span>
<span style="color: #BA2121; font-style: italic">    clusters and identifies the main stem&#39;s shortest paths within the graph structure.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph representing the higher-level graph structure, which includes</span>
<span style="color: #BA2121; font-style: italic">        nodes and edges used for the analysis.</span>
<span style="color: #BA2121; font-style: italic">    list_of_linear_QG_nodes : list</span>
<span style="color: #BA2121; font-style: italic">        A list of nodes from the quotient graph that defines the linear paths to focus on.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    list</span>
<span style="color: #BA2121; font-style: italic">        A deduplicated list of quotient graph nodes traversed by the shortest paths of the main stem.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    sub_riemanian <span style="color: #666">=</span> create_subgraphs_to_work(quotientgraph<span style="color: #666">=</span>QG, list_quotient_node_to_work<span style="color: #666">=</span>list_of_linear_QG_nodes)
    G <span style="color: #666">=</span> QG<span style="color: #666">.</span>point_cloud_graph
    segmsource, ptsource, ptarrivee <span style="color: #666">=</span> initdijkstra(sub_riemanian)
    list_clusters_qg_traversed <span style="color: #666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> segmsource:
        n <span style="color: #666">=</span> G<span style="color: #666">.</span>nodes[i][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>]
        list_clusters_qg_traversed<span style="color: #666">.</span>append(n)
    final_list_stem <span style="color: #666">=</span> <span style="color: #008000">list</span>(<span style="color: #008000">set</span>(list_clusters_qg_traversed))
    <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> final_list_stem:
        QG<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;viterbi_class&#39;</span>] <span style="color: #666">=</span> <span style="color: #666">3</span>
        list_gnode <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> n]
        <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> list_gnode:
            G<span style="color: #666">.</span>nodes[i][<span style="color: #BA2121">&#39;viterbi_class&#39;</span>] <span style="color: #666">=</span> <span style="color: #666">3</span>
    <span style="color: #008000; font-weight: bold">return</span> final_list_stem
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.determination_main_stem_shortest_paths_improved" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">determination_main_stem_shortest_paths_improved</span>


<a href="#spectral_clustering.quotientgraph_semantics.determination_main_stem_shortest_paths_improved" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>determination_main_stem_shortest_paths_improved(QG, ptsource, list_of_linear_QG_nodes, angle_to_stop<span style="color: #666">=45</span>, minimumpoint<span style="color: #666">=5</span>, classnumberstem<span style="color: #666">=3</span>, classnumberanomaly<span style="color: #666">=3</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determines the main 'stem' paths on a quotient graph using an improved algorithm,
identifying clusters and marking anomalies based on vector directions and energy
thresholds.</p>
<p>The function processes a quotient graph and a list of linear quotient graph nodes
to identify the main linear stems. It applies directional filtering based on the
mean and variance of directional information stored in the graph vertices. The
stems are further refined using angle-based thresholds, and anomalies are noted
and classified accordingly. Additionally, this function transfers classifications
from the quotient graph to the Riemannian graph.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph (QG) that contains the structure and properties used to
compute the main stems and anomaly points.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>ptsource</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>A starting point or source node for the shortest path calculation on the sub-Riemannian graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_of_linear_QG_nodes</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>)
          –
          <div class="doc-md-description">
            <p>A list of nodes in the quotient graph that are considered linear for the purposes of this computation.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>angle_to_stop</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>45</code>
)
          –
          <div class="doc-md-description">
            <p>The angle threshold to stop splitting paths, in degrees. Default is <code>45</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>minimumpoint</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>5</code>
)
          –
          <div class="doc-md-description">
            <p>Minimum number of traversals through a cluster node for it to be considered part of the main stem.
Default is <code>5</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>classnumberstem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>The classification number assigned to the nodes belonging to the main stem.
Default is <code>3</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>classnumberanomaly</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>The classification number assigned to nodes considered anomalies.
Default is <code>3</code>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          –
          <div class="doc-md-description">
            <p>A list of quotient graph nodes identified as the refined main stem,
including the source point and the final cleaned list.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">323</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">324</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">325</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">326</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">327</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">328</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">329</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">330</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">331</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">332</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">333</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">334</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">335</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">336</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">337</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">338</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">339</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">340</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">341</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">342</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">343</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">344</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">345</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">346</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">347</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">348</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">349</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">350</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">351</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">352</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">353</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">354</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">355</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">356</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">357</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">358</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">359</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">360</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">361</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">362</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">363</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">364</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">365</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">366</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">367</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">368</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">369</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">370</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">371</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">372</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">373</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">374</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">375</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">376</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">377</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">378</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">379</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">380</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">381</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">382</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">383</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">384</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">385</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">386</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">387</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">388</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">389</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">390</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">391</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">392</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">393</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">394</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">395</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">396</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">397</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">398</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">399</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">400</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">401</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">402</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">403</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">404</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">405</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">406</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">407</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">408</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">409</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">410</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">411</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">412</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">413</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">414</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">415</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">416</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">417</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">418</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">determination_main_stem_shortest_paths_improved</span>(QG, ptsource, list_of_linear_QG_nodes, angle_to_stop<span style="color: #666">=45</span>,
                                                    minimumpoint<span style="color: #666">=5</span>, classnumberstem<span style="color: #666">=3</span>, classnumberanomaly<span style="color: #666">=3</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Determines the main &#39;stem&#39; paths on a quotient graph using an improved algorithm,</span>
<span style="color: #BA2121; font-style: italic">    identifying clusters and marking anomalies based on vector directions and energy</span>
<span style="color: #BA2121; font-style: italic">    thresholds.</span>

<span style="color: #BA2121; font-style: italic">    The function processes a quotient graph and a list of linear quotient graph nodes</span>
<span style="color: #BA2121; font-style: italic">    to identify the main linear stems. It applies directional filtering based on the</span>
<span style="color: #BA2121; font-style: italic">    mean and variance of directional information stored in the graph vertices. The</span>
<span style="color: #BA2121; font-style: italic">    stems are further refined using angle-based thresholds, and anomalies are noted</span>
<span style="color: #BA2121; font-style: italic">    and classified accordingly. Additionally, this function transfers classifications</span>
<span style="color: #BA2121; font-style: italic">    from the quotient graph to the Riemannian graph.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph (QG) that contains the structure and properties used to</span>
<span style="color: #BA2121; font-style: italic">        compute the main stems and anomaly points.</span>
<span style="color: #BA2121; font-style: italic">    ptsource : int</span>
<span style="color: #BA2121; font-style: italic">        A starting point or source node for the shortest path calculation on the sub-Riemannian graph.</span>
<span style="color: #BA2121; font-style: italic">    list_of_linear_QG_nodes : list[int]</span>
<span style="color: #BA2121; font-style: italic">        A list of nodes in the quotient graph that are considered linear for the purposes of this computation.</span>
<span style="color: #BA2121; font-style: italic">    angle_to_stop : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The angle threshold to stop splitting paths, in degrees. Default is ``45``.</span>
<span style="color: #BA2121; font-style: italic">    minimumpoint : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Minimum number of traversals through a cluster node for it to be considered part of the main stem.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``5``.</span>
<span style="color: #BA2121; font-style: italic">    classnumberstem : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The classification number assigned to the nodes belonging to the main stem.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``3``.</span>
<span style="color: #BA2121; font-style: italic">    classnumberanomaly : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The classification number assigned to nodes considered anomalies.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``3``.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    list[int]</span>
<span style="color: #BA2121; font-style: italic">        A list of quotient graph nodes identified as the refined main stem,</span>
<span style="color: #BA2121; font-style: italic">        including the source point and the final cleaned list.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">import</span><span style="color: #BBB"> </span><span style="color: #00F; font-weight: bold">copy</span>
    sub_riemanian <span style="color: #666">=</span> create_subgraphs_to_work(quotientgraph<span style="color: #666">=</span>QG, list_quotient_node_to_work<span style="color: #666">=</span>list_of_linear_QG_nodes)
    G <span style="color: #666">=</span> QG<span style="color: #666">.</span>point_cloud_graph
    energy_to_stop <span style="color: #666">=</span> <span style="color: #666">1</span> <span style="color: #666">-</span> np<span style="color: #666">.</span>cos(np<span style="color: #666">.</span>radians(angle_to_stop))

    <span style="color: #008000">dict</span> <span style="color: #666">=</span> nx<span style="color: #666">.</span>single_source_dijkstra_path_length(sub_riemanian, ptsource, weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;weight&#39;</span>)
    ptarrivee <span style="color: #666">=</span> <span style="color: #008000">max</span>(<span style="color: #008000">dict</span><span style="color: #666">.</span>items(), key<span style="color: #666">=</span>operator<span style="color: #666">.</span>itemgetter(<span style="color: #666">1</span>))[<span style="color: #666">0</span>]
    segmsource <span style="color: #666">=</span> nx<span style="color: #666">.</span>dijkstra_path(sub_riemanian, ptsource, ptarrivee, weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;weight&#39;</span>)
    list_clusters_qg_traversed <span style="color: #666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> segmsource:
        n <span style="color: #666">=</span> G<span style="color: #666">.</span>nodes[i][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>]
        list_clusters_qg_traversed<span style="color: #666">.</span>append(n)

    <span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">count_to_dict</span>(lst):
        <span style="color: #008000; font-weight: bold">return</span> {k: lst<span style="color: #666">.</span>count(k) <span style="color: #008000; font-weight: bold">for</span> k <span style="color: #A2F; font-weight: bold">in</span> lst}

    <span style="color: #008000">dict</span> <span style="color: #666">=</span> count_to_dict(list_clusters_qg_traversed)
    list_stem2 <span style="color: #666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> key, value <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">dict</span><span style="color: #666">.</span>items():
        <span style="color: #008000; font-weight: bold">if</span> value <span style="color: #666">&gt;</span> minimumpoint:
            list_stem2<span style="color: #666">.</span>append(key)
    list_stem1 <span style="color: #666">=</span> <span style="color: #008000">list</span>(<span style="color: #008000">dict</span><span style="color: #666">.</span>fromkeys(list_clusters_qg_traversed))

    quotient_graph_compute_direction_mean(QG)
    quotient_graph_compute_direction_standard_deviation(QG)
    final_list_stem <span style="color: #666">=</span> copy<span style="color: #666">.</span>deepcopy(list_stem2)
    <span style="color: #008000; font-weight: bold">for</span> node <span style="color: #A2F; font-weight: bold">in</span> list_stem2:
        <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>nodes[node][<span style="color: #BA2121">&#39;dir_gradient_angle_mean&#39;</span>] <span style="color: #666">&lt;</span> np<span style="color: #666">.</span>cos(np<span style="color: #666">.</span>radians(angle_to_stop)):
            final_list_stem<span style="color: #666">.</span>remove(node)
            QG<span style="color: #666">.</span>nodes[node][<span style="color: #BA2121">&#39;viterbi_class&#39;</span>] <span style="color: #666">=</span> classnumberanomaly

    nodi <span style="color: #666">=</span> <span style="color: #666">0</span>
    final_list_stem_clean <span style="color: #666">=</span> []
    <span style="color: #008000; font-weight: bold">while</span> nodi <span style="color: #666">&lt;=</span> (<span style="color: #008000">len</span>(final_list_stem) <span style="color: #666">-</span> <span style="color: #666">2</span>):
        e <span style="color: #666">=</span> (final_list_stem[nodi], final_list_stem[nodi <span style="color: #666">+</span> <span style="color: #666">1</span>])
        v1 <span style="color: #666">=</span> QG<span style="color: #666">.</span>nodes[e[<span style="color: #666">0</span>]][<span style="color: #BA2121">&#39;dir_gradient_mean&#39;</span>]
        v2 <span style="color: #666">=</span> QG<span style="color: #666">.</span>nodes[e[<span style="color: #666">1</span>]][<span style="color: #BA2121">&#39;dir_gradient_mean&#39;</span>]
        dot <span style="color: #666">=</span> v1[<span style="color: #666">0</span>] <span style="color: #666">*</span> v2[<span style="color: #666">0</span>] <span style="color: #666">+</span> v1[<span style="color: #666">1</span>] <span style="color: #666">*</span> v2[<span style="color: #666">1</span>] <span style="color: #666">+</span> v1[<span style="color: #666">2</span>] <span style="color: #666">*</span> v2[<span style="color: #666">2</span>]
        energy <span style="color: #666">=</span> <span style="color: #666">1</span> <span style="color: #666">-</span> dot
        <span style="color: #008000">print</span>(e)
        <span style="color: #008000">print</span>(energy)
        <span style="color: #008000; font-weight: bold">if</span> energy <span style="color: #666">&gt;</span> energy_to_stop:
            final_list_stem_clean <span style="color: #666">=</span> final_list_stem[:nodi <span style="color: #666">+</span> <span style="color: #666">1</span>]
            nodi <span style="color: #666">=</span> <span style="color: #008000">len</span>(final_list_stem) <span style="color: #666">+</span> <span style="color: #666">2</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            final_list_stem_clean <span style="color: #666">=</span> final_list_stem
            nodi <span style="color: #666">+=</span> <span style="color: #666">1</span>

    final_list_stem_clean<span style="color: #666">.</span>insert(<span style="color: #666">0</span>, G<span style="color: #666">.</span>nodes[ptsource][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>])
    <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> final_list_stem_clean:
        QG<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&#39;viterbi_class&#39;</span>] <span style="color: #666">=</span> classnumberstem

    transfer_quotientgraph_infos_on_riemanian_graph(QG<span style="color: #666">=</span>QG, info<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>)

    <span style="color: #008000; font-weight: bold">return</span> final_list_stem_clean
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.differenciate_apex_limb" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">differenciate_apex_limb</span>


<a href="#spectral_clustering.quotientgraph_semantics.differenciate_apex_limb" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>differenciate_apex_limb(QG, attribute_class<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, number_leaves_limb<span style="color: #666">=1</span>, new_apex_class<span style="color: #666">=4</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Differentiate the apex limb based on the given attribute class and number of leaves.</p>
<p>This function updates the provided graph by reassigning the specified attribute
class for nodes that meet specific conditions. It identifies nodes (limbs) in the
graph based on the attribute value and further modifies their attribute class if
certain criteria regarding local extremum of the Fiedler vector are satisfied.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>A graph-like object with nodes carrying specific attributes. Typically,
this should be a custom graph object that includes attributes such as
<code>number_of_local_Fiedler_extremum</code> in its nodes.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attribute_class</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;viterbi_class&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The attribute class in the graph's node dictionary to check and update.
Default is <code>'viterbi_class'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>number_leaves_limb</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>1</code>
)
          –
          <div class="doc-md-description">
            <p>The value of <code>attribute_class</code> used to identify the nodes of interest
(limbs). Only nodes where the specific attribute class has this value
will be processed. Default is <code>1</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>new_apex_class</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>4</code>
)
          –
          <div class="doc-md-description">
            <p>The new value for the attribute class to assign to the nodes that satisfy
the conditions. Default is <code>4</code>.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">522</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">523</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">524</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">525</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">526</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">527</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">528</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">529</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">530</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">531</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">532</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">533</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">534</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">535</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">536</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">537</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">538</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">539</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">540</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">541</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">542</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">543</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">544</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">545</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">546</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">547</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">548</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">549</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">550</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">551</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">differenciate_apex_limb</span>(QG, attribute_class<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, number_leaves_limb<span style="color: #666">=1</span>, new_apex_class<span style="color: #666">=4</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Differentiate the apex limb based on the given attribute class and number of leaves.</span>

<span style="color: #BA2121; font-style: italic">    This function updates the provided graph by reassigning the specified attribute</span>
<span style="color: #BA2121; font-style: italic">    class for nodes that meet specific conditions. It identifies nodes (limbs) in the</span>
<span style="color: #BA2121; font-style: italic">    graph based on the attribute value and further modifies their attribute class if</span>
<span style="color: #BA2121; font-style: italic">    certain criteria regarding local extremum of the Fiedler vector are satisfied.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        A graph-like object with nodes carrying specific attributes. Typically,</span>
<span style="color: #BA2121; font-style: italic">        this should be a custom graph object that includes attributes such as</span>
<span style="color: #BA2121; font-style: italic">        `number_of_local_Fiedler_extremum` in its nodes.</span>
<span style="color: #BA2121; font-style: italic">    attribute_class : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The attribute class in the graph&#39;s node dictionary to check and update.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``&#39;viterbi_class&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    number_leaves_limb : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The value of `attribute_class` used to identify the nodes of interest</span>
<span style="color: #BA2121; font-style: italic">        (limbs). Only nodes where the specific attribute class has this value</span>
<span style="color: #BA2121; font-style: italic">        will be processed. Default is ``1``.</span>
<span style="color: #BA2121; font-style: italic">    new_apex_class : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The new value for the attribute class to assign to the nodes that satisfy</span>
<span style="color: #BA2121; font-style: italic">        the conditions. Default is ``4``.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    QG<span style="color: #666">.</span>count_local_extremum_of_Fiedler()
    list_limbs <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[attribute_class] <span style="color: #666">==</span> number_leaves_limb]
    <span style="color: #008000; font-weight: bold">for</span> l <span style="color: #A2F; font-weight: bold">in</span> list_limbs:
        <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>nodes[l][<span style="color: #BA2121">&#39;number_of_local_Fiedler_extremum&#39;</span>] <span style="color: #666">&gt;</span> <span style="color: #666">1</span>:
            QG<span style="color: #666">.</span>nodes[l][attribute_class] <span style="color: #666">=</span> new_apex_class
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.maj_weight_semantics" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">maj_weight_semantics</span>


<a href="#spectral_clustering.quotientgraph_semantics.maj_weight_semantics" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>maj_weight_semantics(QG, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, class_limb<span style="color: #666">=1</span>, class_mainstem<span style="color: #666">=3</span>, class_petiol<span style="color: #666">=5</span>, class_apex<span style="color: #666">=4</span>, class_branch<span style="color: #666">=6</span>, weight_petiol_petiol<span style="color: #666">=0</span>, weight_petiol_apex<span style="color: #666">=10000</span>, weight_branch_limb<span style="color: #666">=10000</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adjusts edge weights in a graph based on semantic class relationships.</p>
<p>This function considers semantic relationships between different graph node
classes and modifies the edge weight accordingly. It specifically targets
edges connecting nodes with defined class combinations, and assigns a new
weight to them based on the given parameters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The input graph where the semantic weights of edges will be modified.
Nodes of the graph should include the attribute specified in
<code>class_attribute</code> to determine their semantic class.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_attribute</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;viterbi_class&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The name of the node attribute that represents the semantic class of the node.
Default is <code>'viterbi_class'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_limb</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>1</code>
)
          –
          <div class="doc-md-description">
            <p>Represents the integer code for the 'limb' semantic class.
Default: <code>1</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_mainstem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>Represents the integer code for the 'mainstem' semantic class.
Default: <code>3</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_petiol</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>5</code>
)
          –
          <div class="doc-md-description">
            <p>Represents the integer code for the 'petiol' semantic class.
Default: <code>5</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_apex</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>4</code>
)
          –
          <div class="doc-md-description">
            <p>Represents the integer code for the 'apex' semantic class.
Default: <code>4</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_branch</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>6</code>
)
          –
          <div class="doc-md-description">
            <p>Represents the integer code for the 'branch' semantic class.
Default: <code>6</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_petiol_petiol</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The weight representing edges between two 'petiol' class nodes.
Default: <code>0</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_petiol_apex</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>10000</code>
)
          –
          <div class="doc-md-description">
            <p>The weight representing edges connecting a 'petiol' class node to an 'apex' class node.
Default: <code>10000</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_branch_limb</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>10000</code>
)
          –
          <div class="doc-md-description">
            <p>The weight representing edges connecting a 'branch' class node to a 'limb' class node.
Default: <code>10000</code>.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <p>This function modifies the input graph in-place by adding or updating the 'weight_sem_paths' attribute
on edges based on their connected nodes' semantic classes.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">801</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">802</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">803</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">804</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">805</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">806</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">807</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">808</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">809</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">810</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">811</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">812</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">813</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">814</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">815</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">816</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">817</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">818</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">819</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">820</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">821</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">822</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">823</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">824</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">825</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">826</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">827</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">828</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">829</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">830</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">831</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">832</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">833</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">834</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">835</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">836</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">837</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">838</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">839</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">840</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">841</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">842</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">843</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">844</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">845</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">846</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">847</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">848</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">849</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">850</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">851</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">852</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">853</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">854</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">855</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">maj_weight_semantics</span>(QG, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, class_limb<span style="color: #666">=1</span>, class_mainstem<span style="color: #666">=3</span>, class_petiol<span style="color: #666">=5</span>,
                         class_apex<span style="color: #666">=4</span>, class_branch<span style="color: #666">=6</span>,
                         weight_petiol_petiol<span style="color: #666">=0</span>, weight_petiol_apex<span style="color: #666">=10000</span>, weight_branch_limb<span style="color: #666">=10000</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Adjusts edge weights in a graph based on semantic class relationships.</span>

<span style="color: #BA2121; font-style: italic">    This function considers semantic relationships between different graph node</span>
<span style="color: #BA2121; font-style: italic">    classes and modifies the edge weight accordingly. It specifically targets</span>
<span style="color: #BA2121; font-style: italic">    edges connecting nodes with defined class combinations, and assigns a new</span>
<span style="color: #BA2121; font-style: italic">    weight to them based on the given parameters.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The input graph where the semantic weights of edges will be modified.</span>
<span style="color: #BA2121; font-style: italic">        Nodes of the graph should include the attribute specified in</span>
<span style="color: #BA2121; font-style: italic">        `class_attribute` to determine their semantic class.</span>
<span style="color: #BA2121; font-style: italic">    class_attribute : str</span>
<span style="color: #BA2121; font-style: italic">        The name of the node attribute that represents the semantic class of the node.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``&#39;viterbi_class&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    class_limb : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Represents the integer code for the &#39;limb&#39; semantic class.</span>
<span style="color: #BA2121; font-style: italic">        Default: `1`</span>
<span style="color: #BA2121; font-style: italic">    class_mainstem : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Represents the integer code for the &#39;mainstem&#39; semantic class.</span>
<span style="color: #BA2121; font-style: italic">        Default: `3`</span>
<span style="color: #BA2121; font-style: italic">    class_petiol : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Represents the integer code for the &#39;petiol&#39; semantic class.</span>
<span style="color: #BA2121; font-style: italic">        Default: `5`</span>
<span style="color: #BA2121; font-style: italic">    class_apex : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Represents the integer code for the &#39;apex&#39; semantic class.</span>
<span style="color: #BA2121; font-style: italic">        Default: `4`</span>
<span style="color: #BA2121; font-style: italic">    class_branch : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Represents the integer code for the &#39;branch&#39; semantic class.</span>
<span style="color: #BA2121; font-style: italic">        Default: `6`</span>
<span style="color: #BA2121; font-style: italic">    weight_petiol_petiol : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight representing edges between two &#39;petiol&#39; class nodes.</span>
<span style="color: #BA2121; font-style: italic">        Default: `0`.</span>
<span style="color: #BA2121; font-style: italic">    weight_petiol_apex : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight representing edges connecting a &#39;petiol&#39; class node to an &#39;apex&#39; class node.</span>
<span style="color: #BA2121; font-style: italic">        Default: `10000`.</span>
<span style="color: #BA2121; font-style: italic">    weight_branch_limb : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight representing edges connecting a &#39;branch&#39; class node to a &#39;limb&#39; class node.</span>
<span style="color: #BA2121; font-style: italic">        Default: `10000`.</span>

<span style="color: #BA2121; font-style: italic">    Notes</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    This function modifies the input graph in-place by adding or updating the &#39;weight_sem_paths&#39; attribute</span>
<span style="color: #BA2121; font-style: italic">    on edges based on their connected nodes&#39; semantic classes.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">for</span> e <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>edges():
        c1 <span style="color: #666">=</span> QG<span style="color: #666">.</span>nodes[e[<span style="color: #666">0</span>]][class_attribute]
        c2 <span style="color: #666">=</span> QG<span style="color: #666">.</span>nodes[e[<span style="color: #666">1</span>]][class_attribute]
        l <span style="color: #666">=</span> [c1, c2]
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_branch, class_limb}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_branch_limb
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.merge_remaining_clusters" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">merge_remaining_clusters</span>


<a href="#spectral_clustering.quotientgraph_semantics.merge_remaining_clusters" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>merge_remaining_clusters(quotientgraph, remaining_clusters_class<span style="color: #666">=0</span>, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Merges clusters in a given quotient graph based on inter-class metadata and updates the point cloud graph
accordingly. The function operates on nodes belonging to the specified 'remaining_clusters_class' and involves
reassigning nodes in the point cloud graph to new clusters after merging.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph in which clusters are to be merged. This is a networkx graph object containing nodes
and edges, along with associated metadata.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>remaining_clusters_class</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The class value used to identify nodes in the quotient graph that belong to the target cluster to
be merged. Default is <code>0</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_attribute</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;viterbi_class&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The attribute name in the quotient graph's node metadata used to distinguish clusters. Nodes with the
specified 'remaining_clusters_class' value for this attribute will be targeted for merging. Default
is <code>'viterbi_class'</code>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>
          –
          <div class="doc-md-description">
            <p>Updated quotient graph after merging clusters. The graph includes revised node and edge metadata based on
the merging process.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>Clusters are merged based on the most frequent inter-class links (metadata). If the most frequent linked
  cluster also belongs to the target class to be merged, the second-most frequent linked cluster is chosen.
  This ensures proper merging behavior.</li>
<li>Updates are propagated to the point cloud graph (<code>point_cloud_graph</code>) within the quotient graph. Nodes in
  the point cloud graph corresponding to the merged clusters are reassigned to the new cluster.</li>
<li>Edge attributes 'useful_path_shortest' are preserved during the merging process. In cases of conflicting data
  between nodes being merged, priority is given to attributes of the original edges in the quotient graph.</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">917</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">918</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">919</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">920</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">921</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">922</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">923</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">924</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">925</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">926</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">927</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">928</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">929</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">930</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">931</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">932</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">933</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">934</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">935</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">936</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">937</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">938</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">939</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">940</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">941</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">942</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">943</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">944</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">945</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">946</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">947</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">948</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">949</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">950</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">951</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">952</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">953</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">954</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">955</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">956</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">957</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">958</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">959</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">960</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">961</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">962</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">963</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">964</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">965</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">966</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">967</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">968</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">969</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">970</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">971</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">972</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">973</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">974</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">975</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">976</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">977</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">978</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">979</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">980</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">981</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">982</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">983</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">984</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">985</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">986</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">987</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">988</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">989</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">merge_remaining_clusters</span>(quotientgraph, remaining_clusters_class<span style="color: #666">=0</span>, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Merges clusters in a given quotient graph based on inter-class metadata and updates the point cloud graph</span>
<span style="color: #BA2121; font-style: italic">    accordingly. The function operates on nodes belonging to the specified &#39;remaining_clusters_class&#39; and involves</span>
<span style="color: #BA2121; font-style: italic">    reassigning nodes in the point cloud graph to new clusters after merging.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph in which clusters are to be merged. This is a networkx graph object containing nodes</span>
<span style="color: #BA2121; font-style: italic">        and edges, along with associated metadata.</span>
<span style="color: #BA2121; font-style: italic">    remaining_clusters_class : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The class value used to identify nodes in the quotient graph that belong to the target cluster to</span>
<span style="color: #BA2121; font-style: italic">        be merged. Default is ``0``.</span>
<span style="color: #BA2121; font-style: italic">    class_attribute : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The attribute name in the quotient graph&#39;s node metadata used to distinguish clusters. Nodes with the</span>
<span style="color: #BA2121; font-style: italic">        specified &#39;remaining_clusters_class&#39; value for this attribute will be targeted for merging. Default</span>
<span style="color: #BA2121; font-style: italic">        is ``&#39;viterbi_class&#39;``.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        Updated quotient graph after merging clusters. The graph includes revised node and edge metadata based on</span>
<span style="color: #BA2121; font-style: italic">        the merging process.</span>

<span style="color: #BA2121; font-style: italic">    Notes</span>
<span style="color: #BA2121; font-style: italic">    -----</span>
<span style="color: #BA2121; font-style: italic">    - Clusters are merged based on the most frequent inter-class links (metadata). If the most frequent linked</span>
<span style="color: #BA2121; font-style: italic">      cluster also belongs to the target class to be merged, the second-most frequent linked cluster is chosen.</span>
<span style="color: #BA2121; font-style: italic">      This ensures proper merging behavior.</span>
<span style="color: #BA2121; font-style: italic">    - Updates are propagated to the point cloud graph (`point_cloud_graph`) within the quotient graph. Nodes in</span>
<span style="color: #BA2121; font-style: italic">      the point cloud graph corresponding to the merged clusters are reassigned to the new cluster.</span>
<span style="color: #BA2121; font-style: italic">    - Edge attributes &#39;useful_path_shortest&#39; are preserved during the merging process. In cases of conflicting data</span>
<span style="color: #BA2121; font-style: italic">      between nodes being merged, priority is given to attributes of the original edges in the quotient graph.</span>

<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    list_clusters <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[class_attribute] <span style="color: #666">==</span> remaining_clusters_class]
    <span style="color: #008000">print</span>(list_clusters)
    G <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>point_cloud_graph

    <span style="color: #008000; font-weight: bold">for</span> u <span style="color: #A2F; font-weight: bold">in</span> list_clusters:
        count <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>compute_quotientgraph_metadata_on_a_node_interclass(u)
        <span style="color: #008000">print</span>(count)
        max_class_o <span style="color: #666">=</span> <span style="color: #008000">max</span>(count, key<span style="color: #666">=</span>count<span style="color: #666">.</span>get)
        max_class <span style="color: #666">=</span> max_class_o
        <span style="color: #3D7B7B; font-style: italic"># deal with possibility of max_class_ another class to merge. In that case, second best linked is chosent</span>
        <span style="color: #3D7B7B; font-style: italic"># if only linked to another class to merge, merge with this one.</span>
        <span style="color: #008000; font-weight: bold">while</span> max_class <span style="color: #A2F; font-weight: bold">in</span> list_clusters <span style="color: #A2F; font-weight: bold">and</span> <span style="color: #008000">bool</span>(count) <span style="color: #A2F; font-weight: bold">and</span> <span style="color: #008000">len</span>(count) <span style="color: #666">&gt;</span> <span style="color: #666">1</span>:
            count<span style="color: #666">.</span>pop(max_class)
            max_class <span style="color: #666">=</span> <span style="color: #008000">max</span>(count, key<span style="color: #666">=</span>count<span style="color: #666">.</span>get)
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">bool</span>(count) <span style="color: #A2F; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">False</span> <span style="color: #A2F; font-weight: bold">or</span> <span style="color: #008000">len</span>(count) <span style="color: #666">==</span> <span style="color: #666">1</span>:
            max_class <span style="color: #666">=</span> max_class_o

        new_cluster <span style="color: #666">=</span> max_class
        <span style="color: #008000">print</span>(new_cluster)
        list_G_nodes_to_change <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> u]
        <span style="color: #008000; font-weight: bold">for</span> g <span style="color: #A2F; font-weight: bold">in</span> list_G_nodes_to_change:
            G<span style="color: #666">.</span>nodes[g][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">=</span> new_cluster

        dict1 <span style="color: #666">=</span> {}
        <span style="color: #008000; font-weight: bold">for</span> e <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>edges(new_cluster):
            dict1[e] <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;useful_path_shortest&#39;</span>]
        quotientgraph <span style="color: #666">=</span> nx<span style="color: #666">.</span>contracted_nodes(quotientgraph, new_cluster, u, self_loops<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>)
        quotientgraph<span style="color: #666">.</span>point_cloud_graph <span style="color: #666">=</span> G
        dict2 <span style="color: #666">=</span> {}
        <span style="color: #008000; font-weight: bold">for</span> e <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>edges(new_cluster):
            dict2[e] <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;useful_path_shortest&#39;</span>]
            <span style="color: #008000; font-weight: bold">if</span> e <span style="color: #A2F; font-weight: bold">in</span> dict1<span style="color: #666">.</span>keys():
                quotientgraph<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;useful_path_shortest&#39;</span>] <span style="color: #666">=</span> dict1[e]
        <span style="color: #008000">print</span>(dict1)
        <span style="color: #008000">print</span>(dict2)

    <span style="color: #008000; font-weight: bold">return</span> quotientgraph
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.minimum_spanning_tree_quotientgraph_semantics" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">minimum_spanning_tree_quotientgraph_semantics</span>


<a href="#spectral_clustering.quotientgraph_semantics.minimum_spanning_tree_quotientgraph_semantics" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>minimum_spanning_tree_quotientgraph_semantics(quotientgraph)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Compute the minimum spanning tree (MST) of a quotient graph with semantic-based
weight adjustments.</p>
<p>This function processes a quotient graph by assigning semantic weights to its
edges based on the semantic labels of the connected nodes. Edges connecting
nodes with the same semantic label are given a higher weight than those
connecting nodes with different semantic labels. Subsequently, the function
computes the MST of the adjusted quotient graph using Kruskal's algorithm.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph on which the MST and weight adjustments should be
computed. The graph must have nodes with a 'semantic_label' property and
edges that need a 'semantic_weight' property. Additionally, it must
incorporate attributes for the point cloud graph used in computation.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<b><code>QG_t2</code></b> (              <code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a></code>
)          –
          <div class="doc-md-description">
            <p>The resultant minimum spanning tree of the quotient graph, where weights
are determined by semantic-based criteria.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">186</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">187</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">188</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">189</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">190</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">191</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">192</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">193</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">194</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">195</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">196</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">197</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">198</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">199</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">200</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">201</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">202</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">203</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">204</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">205</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">206</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">207</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">208</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">209</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">210</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">211</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">212</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">213</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">214</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">215</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">216</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">217</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">218</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">219</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">220</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">221</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">minimum_spanning_tree_quotientgraph_semantics</span>(quotientgraph):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Compute the minimum spanning tree (MST) of a quotient graph with semantic-based</span>
<span style="color: #BA2121; font-style: italic">    weight adjustments.</span>

<span style="color: #BA2121; font-style: italic">    This function processes a quotient graph by assigning semantic weights to its</span>
<span style="color: #BA2121; font-style: italic">    edges based on the semantic labels of the connected nodes. Edges connecting</span>
<span style="color: #BA2121; font-style: italic">    nodes with the same semantic label are given a higher weight than those</span>
<span style="color: #BA2121; font-style: italic">    connecting nodes with different semantic labels. Subsequently, the function</span>
<span style="color: #BA2121; font-style: italic">    computes the MST of the adjusted quotient graph using Kruskal&#39;s algorithm.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph on which the MST and weight adjustments should be</span>
<span style="color: #BA2121; font-style: italic">        computed. The graph must have nodes with a &#39;semantic_label&#39; property and</span>
<span style="color: #BA2121; font-style: italic">        edges that need a &#39;semantic_weight&#39; property. Additionally, it must</span>
<span style="color: #BA2121; font-style: italic">        incorporate attributes for the point cloud graph used in computation.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    QG_t2 : networkx.Graph</span>
<span style="color: #BA2121; font-style: italic">        The resultant minimum spanning tree of the quotient graph, where weights</span>
<span style="color: #BA2121; font-style: italic">        are determined by semantic-based criteria.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    define_semantic_classes(quotientgraph)
    <span style="color: #008000; font-weight: bold">for</span> (u, v) <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>edges:
        <span style="color: #008000; font-weight: bold">if</span> quotientgraph<span style="color: #666">.</span>nodes[u][<span style="color: #BA2121">&#39;semantic_label&#39;</span>] <span style="color: #666">==</span> quotientgraph<span style="color: #666">.</span>nodes[v][<span style="color: #BA2121">&#39;semantic_label&#39;</span>]:
            quotientgraph<span style="color: #666">.</span>edges[u, v][<span style="color: #BA2121">&#39;semantic_weight&#39;</span>] <span style="color: #666">=</span> <span style="color: #666">50</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            quotientgraph<span style="color: #666">.</span>edges[u, v][<span style="color: #BA2121">&#39;semantic_weight&#39;</span>] <span style="color: #666">=</span> <span style="color: #666">1</span>
    compute_quotient_graph_mean_attribute_from_points(quotientgraph<span style="color: #666">.</span>point_cloud_graph, quotientgraph,
                                                      attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>)
    QG_t2 <span style="color: #666">=</span> nx<span style="color: #666">.</span>minimum_spanning_tree(quotientgraph, algorithm<span style="color: #666">=</span><span style="color: #BA2121">&#39;kruskal&#39;</span>, weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;semantic_weight&#39;</span>)

    <span style="color: #008000; font-weight: bold">return</span> QG_t2
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.remove_edges_useful_paths" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">remove_edges_useful_paths</span>


<a href="#spectral_clustering.quotientgraph_semantics.remove_edges_useful_paths" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>remove_edges_useful_paths(QG)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Removes edges that are not marked as useful from the input graph.</p>
<p>This function takes a graph as input and creates a deep copy of it. It iterates
through all edges in the copied graph, and if an edge is marked as not part of a
useful path (as indicated by the 'useful_path_shortest' attribute), it removes
that edge from the original graph.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>Input graph from which edges not marked as useful will be removed. The graph
must contain an attribute 'useful_path_shortest' on edges indicating whether
the edge belongs to a useful shortest path or not.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 992</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 993</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 994</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 995</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 996</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 997</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 998</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 999</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1000</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1001</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1002</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1003</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1004</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1005</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1006</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1007</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1008</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1009</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1010</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1011</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">remove_edges_useful_paths</span>(QG):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Removes edges that are not marked as useful from the input graph.</span>

<span style="color: #BA2121; font-style: italic">    This function takes a graph as input and creates a deep copy of it. It iterates</span>
<span style="color: #BA2121; font-style: italic">    through all edges in the copied graph, and if an edge is marked as not part of a</span>
<span style="color: #BA2121; font-style: italic">    useful path (as indicated by the &#39;useful_path_shortest&#39; attribute), it removes</span>
<span style="color: #BA2121; font-style: italic">    that edge from the original graph.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        Input graph from which edges not marked as useful will be removed. The graph</span>
<span style="color: #BA2121; font-style: italic">        must contain an attribute &#39;useful_path_shortest&#39; on edges indicating whether</span>
<span style="color: #BA2121; font-style: italic">        the edge belongs to a useful shortest path or not.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    FG <span style="color: #666">=</span> copy<span style="color: #666">.</span>deepcopy(QG)
    d <span style="color: #666">=</span> FG<span style="color: #666">.</span>edges()
    <span style="color: #008000; font-weight: bold">for</span> e <span style="color: #A2F; font-weight: bold">in</span> d:
        <span style="color: #008000; font-weight: bold">if</span> FG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;useful_path_shortest&#39;</span>] <span style="color: #A2F; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">False</span>:
            QG<span style="color: #666">.</span>remove_edge(<span style="color: #666">*</span>e)
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.shortest_paths_from_apex_det_branch" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">shortest_paths_from_apex_det_branch</span>


<a href="#spectral_clustering.quotientgraph_semantics.shortest_paths_from_apex_det_branch" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>shortest_paths_from_apex_det_branch(QG, root_point_riemanian, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>, class_apex<span style="color: #666">=4</span>, class_branch<span style="color: #666">=0</span>, class_mainstem<span style="color: #666">=3</span>, new_class_branch<span style="color: #666">=6</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Shortest paths calculation and attribute mutation for apex-derived branches.</p>
<p>This function calculates shortest paths in a point-cloud graph (QG) from nodes classified
as "apex" to the specified root point, utilizing a Riemannian metric. It then updates
node attributes by reclassifying nodes belonging to a specified class and sets edge attributes
for edges on these paths as useful.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph representing the point-cloud structure. It should contain node
attributes, including those specified in <code>class_attribute</code>, and edge attributes for
weights used in shortest path computation.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>root_point_riemanian</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a> or <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/string.html#module-string">string</a></code>)
          –
          <div class="doc-md-description">
            <p>The identifier of the root node within the quotient graph. This is the target node for
computing shortest paths using Dijkstra's algorithm.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_attribute</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;viterbi_class&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The name of the node attribute used to determine and reclassify nodes for processing.
Default is <code>'viterbi_class'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;weight_sem_paths&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The edge attribute name representing edge weights for the shortest path computation.
Default is <code>'weight_sem_paths'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_apex</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>4</code>
)
          –
          <div class="doc-md-description">
            <p>The integer value of the node attribute used to identify "apex" nodes.
Default is <code>4</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_branch</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The integer value of the node attribute for nodes belonging to the original branch class
which will be reclassified.
Default is <code>0</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_mainstem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>This parameter exists but is not actively used in the function logic. Typically might
relate to other classifications within the graph structure.
Default is <code>3</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>new_class_branch</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>6</code>
)
          –
          <div class="doc-md-description">
            <p>The new classification value assigned to nodes that belonged to the <code>class_branch</code> group
encountered along the shortest paths.
Default is <code>6</code>.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">858</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">859</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">860</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">861</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">862</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">863</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">864</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">865</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">866</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">867</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">868</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">869</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">870</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">871</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">872</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">873</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">874</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">875</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">876</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">877</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">878</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">879</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">880</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">881</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">882</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">883</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">884</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">885</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">886</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">887</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">888</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">889</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">890</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">891</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">892</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">893</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">894</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">895</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">896</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">897</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">898</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">899</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">900</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">901</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">902</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">903</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">904</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">905</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">906</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">907</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">908</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">909</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">910</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">911</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">912</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">913</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">914</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">shortest_paths_from_apex_det_branch</span>(QG, root_point_riemanian, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>,
                                        weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>, class_apex<span style="color: #666">=4</span>, class_branch<span style="color: #666">=0</span>, class_mainstem<span style="color: #666">=3</span>,
                                        new_class_branch<span style="color: #666">=6</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Shortest paths calculation and attribute mutation for apex-derived branches.</span>

<span style="color: #BA2121; font-style: italic">    This function calculates shortest paths in a point-cloud graph (QG) from nodes classified</span>
<span style="color: #BA2121; font-style: italic">    as &quot;apex&quot; to the specified root point, utilizing a Riemannian metric. It then updates</span>
<span style="color: #BA2121; font-style: italic">    node attributes by reclassifying nodes belonging to a specified class and sets edge attributes</span>
<span style="color: #BA2121; font-style: italic">    for edges on these paths as useful.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph representing the point-cloud structure. It should contain node</span>
<span style="color: #BA2121; font-style: italic">        attributes, including those specified in `class_attribute`, and edge attributes for</span>
<span style="color: #BA2121; font-style: italic">        weights used in shortest path computation.</span>
<span style="color: #BA2121; font-style: italic">    root_point_riemanian : int or string</span>
<span style="color: #BA2121; font-style: italic">        The identifier of the root node within the quotient graph. This is the target node for</span>
<span style="color: #BA2121; font-style: italic">        computing shortest paths using Dijkstra&#39;s algorithm.</span>
<span style="color: #BA2121; font-style: italic">    class_attribute : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The name of the node attribute used to determine and reclassify nodes for processing.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``&#39;viterbi_class&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    weight : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The edge attribute name representing edge weights for the shortest path computation.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``&#39;weight_sem_paths&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    class_apex : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The integer value of the node attribute used to identify &quot;apex&quot; nodes.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``4``.</span>
<span style="color: #BA2121; font-style: italic">    class_branch : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The integer value of the node attribute for nodes belonging to the original branch class</span>
<span style="color: #BA2121; font-style: italic">        which will be reclassified.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``0``.</span>
<span style="color: #BA2121; font-style: italic">    class_mainstem : int, optional</span>
<span style="color: #BA2121; font-style: italic">        This parameter exists but is not actively used in the function logic. Typically might</span>
<span style="color: #BA2121; font-style: italic">        relate to other classifications within the graph structure.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``3``.</span>
<span style="color: #BA2121; font-style: italic">    new_class_branch : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The new classification value assigned to nodes that belonged to the `class_branch` group</span>
<span style="color: #BA2121; font-style: italic">        encountered along the shortest paths.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``6``.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    G <span style="color: #666">=</span> QG<span style="color: #666">.</span>point_cloud_graph
    list_apex <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[class_attribute] <span style="color: #666">==</span> class_apex]
    <span style="color: #008000; font-weight: bold">for</span> e <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>edges():
        QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;useful_path_shortest&#39;</span>] <span style="color: #666">=</span> <span style="color: #008000; font-weight: bold">False</span>
    <span style="color: #008000; font-weight: bold">for</span> leaf <span style="color: #A2F; font-weight: bold">in</span> list_apex:
        path <span style="color: #666">=</span> nx<span style="color: #666">.</span>dijkstra_path(QG, leaf, G<span style="color: #666">.</span>nodes[root_point_riemanian][<span style="color: #BA2121">&quot;quotient_graph_node&quot;</span>], weight<span style="color: #666">=</span>weight)
        <span style="color: #008000">print</span>(path)
        <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> path:
            <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>nodes[n][class_attribute] <span style="color: #666">==</span> class_branch:
                QG<span style="color: #666">.</span>nodes[n][class_attribute] <span style="color: #666">=</span> new_class_branch
        <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(path) <span style="color: #666">-</span> <span style="color: #666">1</span>):
            <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>has_edge(path[i], path[i <span style="color: #666">+</span> <span style="color: #666">1</span>]):
                e <span style="color: #666">=</span> (path[i], path[i <span style="color: #666">+</span> <span style="color: #666">1</span>])
            <span style="color: #008000; font-weight: bold">else</span>:
                e <span style="color: #666">=</span> (path[i <span style="color: #666">+</span> <span style="color: #666">1</span>], path[i])
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;useful_path_shortest&#39;</span>] <span style="color: #666">=</span> <span style="color: #008000; font-weight: bold">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.shortest_paths_from_limbs_det_petiol" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">shortest_paths_from_limbs_det_petiol</span>


<a href="#spectral_clustering.quotientgraph_semantics.shortest_paths_from_limbs_det_petiol" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>shortest_paths_from_limbs_det_petiol(QG, root_point_riemanian, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>, class_limb<span style="color: #666">=1</span>, class_linear<span style="color: #666">=0</span>, class_mainstem<span style="color: #666">=3</span>, new_class_petiol<span style="color: #666">=5</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Computes shortest paths from limb nodes to the root point in the Riemannian tree graph and updates
node and edge attributes accordingly.</p>
<p>This function identifies limb nodes in the graph based on their classification attribute and calculates
the shortest path from these limb nodes to a specified root point in the Riemannian tree graph.
During the path computation, nodes classified as linear are reclassified to a new specified petiol class.
Additionally, edges along these paths are marked as part of a useful shortest path.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The input graph representing the point cloud or Riemannian tree structure.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>root_point_riemanian</code></b>
              (<code>Any</code>)
          –
          <div class="doc-md-description">
            <p>The key of the root node in the graph from which shortest paths are computed.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_attribute</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;viterbi_class&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The node attribute in the graph used for classification.
Default is <code>'viterbi_class'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;weight_sem_paths&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The edge attribute used to calculate shortest paths' weights
Default is <code>'weight_sem_paths'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_limb</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>1</code>
)
          –
          <div class="doc-md-description">
            <p>The classification value of nodes considered as limb nodes
Default is <code>1</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_linear</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The classification value of nodes considered linear in the graph
Default is <code>0</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_mainstem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>The classification value of nodes considered as the main stem in the graph
Default is <code>3</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>new_class_petiol</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>5</code>
)
          –
          <div class="doc-md-description">
            <p>The classification value to which linear nodes are reclassified during path traversal
Default is <code>5</code>.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <p>The function updates the graph <code>QG</code> in place by modifying node and edge attributes.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">744</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">745</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">746</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">747</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">748</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">749</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">750</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">751</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">752</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">753</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">754</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">755</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">756</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">757</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">758</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">759</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">760</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">761</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">762</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">763</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">764</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">765</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">766</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">767</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">768</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">769</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">770</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">771</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">772</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">773</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">774</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">775</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">776</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">777</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">778</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">779</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">780</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">781</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">782</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">783</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">784</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">785</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">786</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">787</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">788</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">789</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">790</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">791</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">792</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">793</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">794</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">795</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">796</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">797</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">798</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">shortest_paths_from_limbs_det_petiol</span>(QG, root_point_riemanian, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>,
                                         weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>, class_limb<span style="color: #666">=1</span>, class_linear<span style="color: #666">=0</span>, class_mainstem<span style="color: #666">=3</span>,
                                         new_class_petiol<span style="color: #666">=5</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Computes shortest paths from limb nodes to the root point in the Riemannian tree graph and updates</span>
<span style="color: #BA2121; font-style: italic">    node and edge attributes accordingly.</span>

<span style="color: #BA2121; font-style: italic">    This function identifies limb nodes in the graph based on their classification attribute and calculates</span>
<span style="color: #BA2121; font-style: italic">    the shortest path from these limb nodes to a specified root point in the Riemannian tree graph.</span>
<span style="color: #BA2121; font-style: italic">    During the path computation, nodes classified as linear are reclassified to a new specified petiol class.</span>
<span style="color: #BA2121; font-style: italic">    Additionally, edges along these paths are marked as part of a useful shortest path.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The input graph representing the point cloud or Riemannian tree structure.</span>
<span style="color: #BA2121; font-style: italic">    root_point_riemanian : Any</span>
<span style="color: #BA2121; font-style: italic">        The key of the root node in the graph from which shortest paths are computed.</span>
<span style="color: #BA2121; font-style: italic">    class_attribute : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The node attribute in the graph used for classification.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``&#39;viterbi_class&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    weight : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The edge attribute used to calculate shortest paths&#39; weights</span>
<span style="color: #BA2121; font-style: italic">        Default is ``&#39;weight_sem_paths&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    class_limb : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The classification value of nodes considered as limb nodes</span>
<span style="color: #BA2121; font-style: italic">        Default is ``1``.</span>
<span style="color: #BA2121; font-style: italic">    class_linear : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The classification value of nodes considered linear in the graph</span>
<span style="color: #BA2121; font-style: italic">        Default is ``0``.</span>
<span style="color: #BA2121; font-style: italic">    class_mainstem : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The classification value of nodes considered as the main stem in the graph</span>
<span style="color: #BA2121; font-style: italic">        Default is ``3``.</span>
<span style="color: #BA2121; font-style: italic">    new_class_petiol : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The classification value to which linear nodes are reclassified during path traversal</span>
<span style="color: #BA2121; font-style: italic">        Default is ``5``.</span>

<span style="color: #BA2121; font-style: italic">    Notes</span>
<span style="color: #BA2121; font-style: italic">    -----</span>
<span style="color: #BA2121; font-style: italic">    The function updates the graph `QG` in place by modifying node and edge attributes.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    G <span style="color: #666">=</span> QG<span style="color: #666">.</span>point_cloud_graph

    list_limb <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[class_attribute] <span style="color: #666">==</span> class_limb]
    <span style="color: #008000; font-weight: bold">for</span> leaf <span style="color: #A2F; font-weight: bold">in</span> list_limb:
        path <span style="color: #666">=</span> nx<span style="color: #666">.</span>dijkstra_path(QG, leaf, G<span style="color: #666">.</span>nodes[root_point_riemanian][<span style="color: #BA2121">&quot;quotient_graph_node&quot;</span>], weight<span style="color: #666">=</span>weight)
        <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> path:
            <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>nodes[n][class_attribute] <span style="color: #666">==</span> class_linear:
                QG<span style="color: #666">.</span>nodes[n][class_attribute] <span style="color: #666">=</span> new_class_petiol
        <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(path) <span style="color: #666">-</span> <span style="color: #666">1</span>):
            <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>has_edge(path[i], path[i <span style="color: #666">+</span> <span style="color: #666">1</span>]):
                e <span style="color: #666">=</span> (path[i], path[i <span style="color: #666">+</span> <span style="color: #666">1</span>])
            <span style="color: #008000; font-weight: bold">else</span>:
                e <span style="color: #666">=</span> (path[i <span style="color: #666">+</span> <span style="color: #666">1</span>], path[i])
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;useful_path_shortest&#39;</span>] <span style="color: #666">=</span> <span style="color: #008000; font-weight: bold">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.stem_detection_with_quotite_leaves" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">stem_detection_with_quotite_leaves</span>


<a href="#spectral_clustering.quotientgraph_semantics.stem_detection_with_quotite_leaves" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>stem_detection_with_quotite_leaves(QG, list_leaves3, list_apex, list_of_linear, root_point_riemanian, new_class_stem<span style="color: #666">=3</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Detects and classifies the main stem of a graph based on leaf quotients and other metrics.</p>
<p>This function identifies the main stem of an input graph using attributes like
leaf quotients, apex nodes, and linear node structures. The identified stem
is classified and its attributes are exported for further use. The function
works by analyzing subgraphs, calculating paths, and determining connections
between nodes to identify the main stem.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>A quotient graph representation of the point cloud graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_leaves3</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
          –
          <div class="doc-md-description">
            <p>A list of end-leaf nodes in the quotient graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_apex</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
          –
          <div class="doc-md-description">
            <p>A list of apex nodes to consider. If empty, list_leaves3 is used by default.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_of_linear</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
          –
          <div class="doc-md-description">
            <p>A list of nodes representing a linear path or structure in the graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>root_point_riemanian</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>Node id corresponding to the root point in the Riemannian graph representation.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>new_class_stem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>An integer value used to classify the main stem nodes after detection.
Default is <code>3</code>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>
          –
          <div class="doc-md-description">
            <p>A list of nodes forming the identified and classified main stem of the graph.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>The function depends heavily on networkx for graph operations such as
  subgraph creation, path calculations, and attribute manipulations.</li>
<li>Subgraphs are dynamically created to analyze and validate paths.</li>
<li>Detected stem nodes are marked with the provided classification value in
  the quotient graph <code>viterbi_class</code> attribute.</li>
<li>The exported attributes can be used for further semantic analysis or visualization.</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">421</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">422</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">423</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">424</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">425</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">426</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">427</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">428</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">429</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">430</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">431</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">432</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">433</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">434</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">435</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">436</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">437</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">438</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">439</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">440</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">441</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">442</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">443</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">444</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">445</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">446</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">447</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">448</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">449</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">450</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">451</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">452</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">453</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">454</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">455</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">456</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">457</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">458</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">459</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">460</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">461</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">462</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">463</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">464</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">465</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">466</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">467</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">468</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">469</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">470</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">471</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">472</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">473</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">474</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">475</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">476</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">477</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">478</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">479</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">480</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">481</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">482</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">483</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">484</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">485</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">486</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">487</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">488</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">489</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">490</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">491</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">492</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">493</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">494</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">495</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">496</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">497</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">498</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">499</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">500</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">501</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">502</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">503</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">504</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">505</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">506</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">507</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">508</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">509</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">510</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">511</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">512</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">513</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">514</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">515</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">516</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">517</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">518</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">519</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">stem_detection_with_quotite_leaves</span>(QG, list_leaves3, list_apex, list_of_linear, root_point_riemanian,
                                       new_class_stem<span style="color: #666">=3</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Detects and classifies the main stem of a graph based on leaf quotients and other metrics.</span>

<span style="color: #BA2121; font-style: italic">    This function identifies the main stem of an input graph using attributes like</span>
<span style="color: #BA2121; font-style: italic">    leaf quotients, apex nodes, and linear node structures. The identified stem</span>
<span style="color: #BA2121; font-style: italic">    is classified and its attributes are exported for further use. The function</span>
<span style="color: #BA2121; font-style: italic">    works by analyzing subgraphs, calculating paths, and determining connections</span>
<span style="color: #BA2121; font-style: italic">    between nodes to identify the main stem.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        A quotient graph representation of the point cloud graph.</span>
<span style="color: #BA2121; font-style: italic">    list_leaves3 : list</span>
<span style="color: #BA2121; font-style: italic">        A list of end-leaf nodes in the quotient graph.</span>
<span style="color: #BA2121; font-style: italic">    list_apex : list</span>
<span style="color: #BA2121; font-style: italic">        A list of apex nodes to consider. If empty, list_leaves3 is used by default.</span>
<span style="color: #BA2121; font-style: italic">    list_of_linear : list</span>
<span style="color: #BA2121; font-style: italic">        A list of nodes representing a linear path or structure in the graph.</span>
<span style="color: #BA2121; font-style: italic">    root_point_riemanian : int</span>
<span style="color: #BA2121; font-style: italic">        Node id corresponding to the root point in the Riemannian graph representation.</span>
<span style="color: #BA2121; font-style: italic">    new_class_stem : int, optional</span>
<span style="color: #BA2121; font-style: italic">        An integer value used to classify the main stem nodes after detection.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``3``.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    list</span>
<span style="color: #BA2121; font-style: italic">        A list of nodes forming the identified and classified main stem of the graph.</span>

<span style="color: #BA2121; font-style: italic">    Notes</span>
<span style="color: #BA2121; font-style: italic">    -----</span>
<span style="color: #BA2121; font-style: italic">    - The function depends heavily on networkx for graph operations such as</span>
<span style="color: #BA2121; font-style: italic">      subgraph creation, path calculations, and attribute manipulations.</span>
<span style="color: #BA2121; font-style: italic">    - Subgraphs are dynamically created to analyze and validate paths.</span>
<span style="color: #BA2121; font-style: italic">    - Detected stem nodes are marked with the provided classification value in</span>
<span style="color: #BA2121; font-style: italic">      the quotient graph `viterbi_class` attribute.</span>
<span style="color: #BA2121; font-style: italic">    - The exported attributes can be used for further semantic analysis or visualization.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    calculate_leaf_quotients(QG, list_leaves3, list_of_linear, root_point_riemanian)
    G <span style="color: #666">=</span> QG<span style="color: #666">.</span>point_cloud_graph
    list_length <span style="color: #666">=</span> []
    <span style="color: #008000; font-weight: bold">if</span> list_apex:
        list_end <span style="color: #666">=</span> list_apex
    <span style="color: #008000; font-weight: bold">else</span>:
        list_end <span style="color: #666">=</span> list_leaves3

    <span style="color: #008000; font-weight: bold">for</span> leaf <span style="color: #A2F; font-weight: bold">in</span> list_end:
        sub_qg <span style="color: #666">=</span> nx<span style="color: #666">.</span>subgraph(QG, list_of_linear <span style="color: #666">+</span> [leaf] <span style="color: #666">+</span> [G<span style="color: #666">.</span>nodes[root_point_riemanian][<span style="color: #BA2121">&quot;quotient_graph_node&quot;</span>]])
        display_and_export_quotient_graph_matplotlib(qg<span style="color: #666">=</span>sub_qg, node_sizes<span style="color: #666">=20</span>,
                                                     name<span style="color: #666">=</span><span style="color: #BA2121">&quot;sub_graphsclass_feuilles_sur_noeuds&quot;</span> <span style="color: #666">+</span> <span style="color: #008000">str</span>(leaf),
                                                     data_on_nodes<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>,
                                                     attributekmeans4clusters<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>)

        <span style="color: #008000; font-weight: bold">if</span> nx<span style="color: #666">.</span>has_path(sub_qg, leaf, G<span style="color: #666">.</span>nodes[root_point_riemanian][<span style="color: #BA2121">&quot;quotient_graph_node&quot;</span>]):
            path <span style="color: #666">=</span> nx<span style="color: #666">.</span>dijkstra_path(sub_qg, leaf, G<span style="color: #666">.</span>nodes[root_point_riemanian][<span style="color: #BA2121">&quot;quotient_graph_node&quot;</span>],
                                    weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;distance_centroides&#39;</span>)
        <span style="color: #008000; font-weight: bold">else</span>:
            path <span style="color: #666">=</span> nx<span style="color: #666">.</span>dijkstra_path(QG, leaf, G<span style="color: #666">.</span>nodes[root_point_riemanian][<span style="color: #BA2121">&quot;quotient_graph_node&quot;</span>],
                                    weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;distance_centroides&#39;</span>)
        pathleafquantity <span style="color: #666">=</span> []
        paths <span style="color: #666">=</span> []
        <span style="color: #008000; font-weight: bold">for</span> p <span style="color: #A2F; font-weight: bold">in</span> path:
            pathleafquantity<span style="color: #666">.</span>append(QG<span style="color: #666">.</span>nodes[p][<span style="color: #BA2121">&#39;leaf_quotient_n&#39;</span>])
            paths<span style="color: #666">.</span>append(path)
        <span style="color: #008000">print</span>(pathleafquantity)
        <span style="color: #008000">print</span>(<span style="color: #008000">set</span>(pathleafquantity))
        lengthpath <span style="color: #666">=</span> <span style="color: #008000">sum</span>(<span style="color: #008000">list</span>(<span style="color: #008000">set</span>(pathleafquantity)))
        list_length<span style="color: #666">.</span>append(lengthpath)
        <span style="color: #008000">print</span>(path)
        <span style="color: #008000">print</span>(lengthpath)

    leafend <span style="color: #666">=</span> list_end[list_length<span style="color: #666">.</span>index(<span style="color: #008000">max</span>(list_length))]
    <span style="color: #3D7B7B; font-style: italic"># path_final = paths[]</span>

    list_stem_full <span style="color: #666">=</span> nx<span style="color: #666">.</span>dijkstra_path(QG, G<span style="color: #666">.</span>nodes[root_point_riemanian][<span style="color: #BA2121">&quot;quotient_graph_node&quot;</span>], leafend,
                                      weight<span style="color: #666">=</span><span style="color: #BA2121">&#39;distance_centroides&#39;</span>)
    list_stem <span style="color: #666">=</span> list_stem_full
    <span style="color: #008000">print</span>(<span style="color: #BA2121">&#39;list_stem&#39;</span>)
    <span style="color: #008000">print</span>(list_stem)
    previous <span style="color: #666">=</span> <span style="color: #666">0</span>
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    maxim = QG.nodes[G.nodes[root_point_riemanian][&quot;quotient_graph_node&quot;]][&#39;leaf_quotient_n&#39;]</span>
<span style="color: #BA2121; font-style: italic">    for n in list_stem_full:</span>
<span style="color: #BA2121; font-style: italic">        if maxim &gt;= QG.nodes[n][&#39;leaf_quotient_n&#39;]:</span>
<span style="color: #BA2121; font-style: italic">            maxim = QG.nodes[n][&#39;leaf_quotient_n&#39;]</span>
<span style="color: #BA2121; font-style: italic">            prev = n</span>
<span style="color: #BA2121; font-style: italic">        else:</span>
<span style="color: #BA2121; font-style: italic">            list_stem.pop(prev)</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">del</span> list_stem[<span style="color: #666">-1</span>]
    <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> list_stem:
        <span style="color: #3D7B7B; font-style: italic"># if n not in list_leaves3:</span>
        QG<span style="color: #666">.</span>nodes[n][<span style="color: #BA2121">&quot;viterbi_class&quot;</span>] <span style="color: #666">=</span> new_class_stem

    export_quotient_graph_attribute_on_point_cloud(QG, attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, name<span style="color: #666">=</span><span style="color: #BA2121">&#39;semantic_&#39;</span>)
    <span style="color: #008000; font-weight: bold">return</span> list_stem
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.topology_control" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">topology_control</span>


<a href="#spectral_clustering.quotientgraph_semantics.topology_control" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>topology_control(quotient_graph, attribute_class_control<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, class_stem<span style="color: #666">=3</span>, class_petiols<span style="color: #666">=5</span>, class_limb<span style="color: #666">=1</span>, class_apex<span style="color: #666">=4</span>, error_norm<span style="color: #666">=10</span>, error_dir<span style="color: #666">=11</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Adjusts node attributes in a quotient graph based on the class control rules.</p>
<p>This function modifies the node attributes in the provided quotient graph
(QG) according to specific rules associated with node classifications such as
stems, petioles, limbs, and apex. Adjustments are made to enforce corrections
for nodes incorrectly classified with high degrees or inappropriate connections.
The corrections are applied by reassigning specific error classification values.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotient_graph</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>A NetworkX graph where each node has attributes, including the
classification attribute used for controlling topology.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attribute_class_control</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;viterbi_class&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Name of the node attribute that represents the class to control.
The default is <code>'viterbi_class'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_stem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>Numerical identifier representing the class of stem nodes.
The default is <code>3</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_petiols</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>5</code>
)
          –
          <div class="doc-md-description">
            <p>Numerical identifier representing the class of petiole nodes.
The default is <code>5</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_limb</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>1</code>
)
          –
          <div class="doc-md-description">
            <p>Numerical identifier representing the class of limb nodes.
The default is <code>1</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_apex</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>4</code>
)
          –
          <div class="doc-md-description">
            <p>Numerical identifier representing the class of apex nodes.
The default is <code>4</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>error_norm</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>10</code>
)
          –
          <div class="doc-md-description">
            <p>Numerical identifier used to reclassify nodes that violate the
connection rules for limb or apex nodes. The default is <code>10</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>error_dir</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>11</code>
)
          –
          <div class="doc-md-description">
            <p>Numerical identifier used to reclassify nodes with high degree
that violate the class petioles rules. The default is <code>11</code>.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">554</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">555</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">556</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">557</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">558</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">559</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">560</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">561</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">562</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">563</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">564</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">565</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">566</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">567</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">568</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">569</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">570</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">571</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">572</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">573</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">574</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">575</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">576</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">577</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">578</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">579</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">580</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">581</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">582</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">583</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">584</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">585</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">586</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">587</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">588</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">589</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">590</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">591</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">592</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">593</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">594</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">595</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">596</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">597</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">598</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">599</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">600</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">601</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">topology_control</span>(quotient_graph, attribute_class_control<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, class_stem<span style="color: #666">=3</span>, class_petiols<span style="color: #666">=5</span>,
                     class_limb<span style="color: #666">=1</span>, class_apex<span style="color: #666">=4</span>, error_norm<span style="color: #666">=10</span>, error_dir<span style="color: #666">=11</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Adjusts node attributes in a quotient graph based on the class control rules.</span>

<span style="color: #BA2121; font-style: italic">    This function modifies the node attributes in the provided quotient graph</span>
<span style="color: #BA2121; font-style: italic">    (QG) according to specific rules associated with node classifications such as</span>
<span style="color: #BA2121; font-style: italic">    stems, petioles, limbs, and apex. Adjustments are made to enforce corrections</span>
<span style="color: #BA2121; font-style: italic">    for nodes incorrectly classified with high degrees or inappropriate connections.</span>
<span style="color: #BA2121; font-style: italic">    The corrections are applied by reassigning specific error classification values.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotient_graph : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        A NetworkX graph where each node has attributes, including the</span>
<span style="color: #BA2121; font-style: italic">        classification attribute used for controlling topology.</span>
<span style="color: #BA2121; font-style: italic">    attribute_class_control : str, optional</span>
<span style="color: #BA2121; font-style: italic">        Name of the node attribute that represents the class to control.</span>
<span style="color: #BA2121; font-style: italic">        The default is ``&#39;viterbi_class&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    class_stem : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Numerical identifier representing the class of stem nodes.</span>
<span style="color: #BA2121; font-style: italic">        The default is ``3``.</span>
<span style="color: #BA2121; font-style: italic">    class_petiols : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Numerical identifier representing the class of petiole nodes.</span>
<span style="color: #BA2121; font-style: italic">        The default is ``5``.</span>
<span style="color: #BA2121; font-style: italic">    class_limb : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Numerical identifier representing the class of limb nodes.</span>
<span style="color: #BA2121; font-style: italic">        The default is ``1``.</span>
<span style="color: #BA2121; font-style: italic">    class_apex : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Numerical identifier representing the class of apex nodes.</span>
<span style="color: #BA2121; font-style: italic">        The default is ``4``.</span>
<span style="color: #BA2121; font-style: italic">    error_norm : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Numerical identifier used to reclassify nodes that violate the</span>
<span style="color: #BA2121; font-style: italic">        connection rules for limb or apex nodes. The default is ``10``.</span>
<span style="color: #BA2121; font-style: italic">    error_dir : int, optional</span>
<span style="color: #BA2121; font-style: italic">        Numerical identifier used to reclassify nodes with high degree</span>
<span style="color: #BA2121; font-style: italic">        that violate the class petioles rules. The default is ``11``.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    QG <span style="color: #666">=</span> quotient_graph
    <span style="color: #3D7B7B; font-style: italic"># check leaves connected to stem</span>
    stem <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[attribute_class_control] <span style="color: #666">==</span> class_stem]
    <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> QG[stem[<span style="color: #666">0</span>]]:
        <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>nodes[n][attribute_class_control] <span style="color: #666">==</span> class_limb <span style="color: #A2F; font-weight: bold">or</span> QG<span style="color: #666">.</span>nodes[n][attribute_class_control] <span style="color: #666">==</span> class_apex:
            QG<span style="color: #666">.</span>nodes[n][attribute_class_control] <span style="color: #666">=</span> error_norm

    petiols <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[attribute_class_control] <span style="color: #666">==</span> class_petiols]
    <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> petiols:
        <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>degree(n) <span style="color: #666">&gt;=</span> <span style="color: #666">3</span>:
            QG<span style="color: #666">.</span>nodes[n][attribute_class_control] <span style="color: #666">=</span> error_dir
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.treat_topology_error" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">treat_topology_error</span>


<a href="#spectral_clustering.quotientgraph_semantics.treat_topology_error" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>treat_topology_error(quotient_graph, attribute_class_control<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, error<span style="color: #666">=5</span>, way_to_treat<span style="color: #666">=</span><span style="color: #BA2121">&#39;direction&#39;</span>, number_of_cluster_tested<span style="color: #666">=20</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handles errors in the topological attributes of a quotient graph by identifying problematic nodes
and resegmenting them using a clustering approach. This method applies an elbow method for clustering
to ensure appropriate grouping of nodes based on specified attributes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotient_graph</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The input quotient graph containing nodes with labeled attributes to analyze and correct.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attribute_class_control</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;viterbi_class&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The attribute in quotient_graph's nodes that is examined to identify nodes with errors.
Default is <code>'viterbi_class'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>error</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>5</code>
)
          –
          <div class="doc-md-description">
            <p>The specific error value in the attribute_class_control being targeted for treatment.
Default is <code>5</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>way_to_treat</code></b>
              (<code>(direction, norm)</code>, default:
                  <code>&#39;direction&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Specifies the method to use for segmenting and treating erroneous nodes.
If <code>'direction'</code>, the 'direction_gradient' attribute is used for resegmentation.
If <code>'norm'</code>, the 'norm_gradient' attribute is used.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>number_of_cluster_tested</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>20</code>
)
          –
          <div class="doc-md-description">
            <p>The maximum number of clusters to test when applying the elbow method for clustering the nodes.
Default is <code>20</code>.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <p>The method makes use of the resegment_nodes_with_elbow_method, which performs clustering on nodes
based on their attributes. The attributes ‘direction_gradient’ or ‘norm_gradient’ are utilized
depending on the <code>way_to_treat</code> parameter to guide the resegmentation process.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">604</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">605</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">606</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">607</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">608</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">609</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">610</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">611</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">612</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">613</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">614</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">615</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">616</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">617</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">618</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">619</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">620</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">621</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">622</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">623</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">624</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">625</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">626</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">627</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">628</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">629</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">630</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">631</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">632</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">633</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">634</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">635</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">636</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">637</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">638</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">639</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">640</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">641</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">642</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">643</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">644</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">645</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">646</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">treat_topology_error</span>(quotient_graph, attribute_class_control<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, error<span style="color: #666">=5</span>, way_to_treat<span style="color: #666">=</span><span style="color: #BA2121">&#39;direction&#39;</span>,
                         number_of_cluster_tested<span style="color: #666">=20</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Handles errors in the topological attributes of a quotient graph by identifying problematic nodes</span>
<span style="color: #BA2121; font-style: italic">    and resegmenting them using a clustering approach. This method applies an elbow method for clustering</span>
<span style="color: #BA2121; font-style: italic">    to ensure appropriate grouping of nodes based on specified attributes.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotient_graph : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The input quotient graph containing nodes with labeled attributes to analyze and correct.</span>
<span style="color: #BA2121; font-style: italic">    attribute_class_control : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The attribute in quotient_graph&#39;s nodes that is examined to identify nodes with errors.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``&#39;viterbi_class&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    error : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The specific error value in the attribute_class_control being targeted for treatment.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``5``.</span>
<span style="color: #BA2121; font-style: italic">    way_to_treat : {&#39;direction&#39;, &#39;norm&#39;}, optional, default=&#39;direction&#39;</span>
<span style="color: #BA2121; font-style: italic">        Specifies the method to use for segmenting and treating erroneous nodes.</span>
<span style="color: #BA2121; font-style: italic">        If ``&#39;direction&#39;``, the &#39;direction_gradient&#39; attribute is used for resegmentation.</span>
<span style="color: #BA2121; font-style: italic">        If ``&#39;norm&#39;``, the &#39;norm_gradient&#39; attribute is used.</span>
<span style="color: #BA2121; font-style: italic">    number_of_cluster_tested : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The maximum number of clusters to test when applying the elbow method for clustering the nodes.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``20``.</span>

<span style="color: #BA2121; font-style: italic">    Notes</span>
<span style="color: #BA2121; font-style: italic">    -----</span>
<span style="color: #BA2121; font-style: italic">    The method makes use of the resegment_nodes_with_elbow_method, which performs clustering on nodes</span>
<span style="color: #BA2121; font-style: italic">    based on their attributes. The attributes ‘direction_gradient’ or ‘norm_gradient’ are utilized</span>
<span style="color: #BA2121; font-style: italic">    depending on the `way_to_treat` parameter to guide the resegmentation process.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    QG <span style="color: #666">=</span> quotient_graph
    nodes_to_treat <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[attribute_class_control] <span style="color: #666">==</span> error]

    <span style="color: #008000; font-weight: bold">if</span> way_to_treat <span style="color: #666">==</span> <span style="color: #BA2121">&#39;direction&#39;</span>:
        resegment_nodes_with_elbow_method(QG, QG_nodes_to_rework<span style="color: #666">=</span>nodes_to_treat,
                                          number_of_cluster_tested<span style="color: #666">=</span>number_of_cluster_tested,
                                          attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;direction_gradient&#39;</span>, number_attribute<span style="color: #666">=3</span>, standardization<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>)
    <span style="color: #008000; font-weight: bold">elif</span> way_to_treat <span style="color: #666">==</span> <span style="color: #BA2121">&#39;norm&#39;</span>:
        resegment_nodes_with_elbow_method(QG, QG_nodes_to_rework<span style="color: #666">=</span>nodes_to_treat,
                                          number_of_cluster_tested<span style="color: #666">=</span>number_of_cluster_tested,
                                          attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;norm_gradient&#39;</span>, number_attribute<span style="color: #666">=1</span>, standardization<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>,
                                          numer<span style="color: #666">=1000</span>)
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.quotientgraph_semantics.weight_with_semantic" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">weight_with_semantic</span>


<a href="#spectral_clustering.quotientgraph_semantics.weight_with_semantic" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>weight_with_semantic(QG, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, class_limb<span style="color: #666">=1</span>, class_mainstem<span style="color: #666">=3</span>, class_linear<span style="color: #666">=0</span>, class_apex<span style="color: #666">=4</span>, weight_limb_limb<span style="color: #666">=10000</span>, weight_apex_apex<span style="color: #666">=10000</span>, weight_apex_mainstem<span style="color: #666">=10000</span>, weight_limb_apex<span style="color: #666">=10000</span>, weight_limb_mainstem<span style="color: #666">=10000</span>, weight_linear_mainstem<span style="color: #666">=0</span>, weight_linear_linear<span style="color: #666">=0</span>, weight_linear_limb<span style="color: #666">=0</span>, weight_linear_apex<span style="color: #666">=0</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Assigns semantic weights to the edges of a graph based on node classifications.</p>
<p>This function iterates over all edges in the provided graph <code>QG</code> and assigns a weight
to each edge depending on the classification of its connected nodes. The classification
of the nodes is determined using the <code>class_attribute</code> parameter. Different combinations
or sets of node categories (e.g., <code>class_limb</code>, <code>class_apex</code>) have corresponding weights
that are specified as input arguments to the function.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><span title="spectral_clustering.quotientgraph.QuotientGraph">QuotientGraph</span></code>)
          –
          <div class="doc-md-description">
            <p>The graph whose edges will be assigned weights based on the semantic relationships
between connected nodes.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_attribute</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;viterbi_class&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The node attribute in <code>QG</code> used to determine the category of the nodes.
Default is <code>'viterbi_class'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_limb</code></b>
              (<code>Any</code>, default:
                  <code>1</code>
)
          –
          <div class="doc-md-description">
            <p>A value representing the "limb" classification of a node.
Default is <code>1</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_mainstem</code></b>
              (<code>Any</code>, default:
                  <code>3</code>
)
          –
          <div class="doc-md-description">
            <p>A value representing the "mainstem" classification of a node.
Default is <code>3</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_linear</code></b>
              (<code>Any</code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>A value representing the "linear" classification of a node.
Default is <code>0</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>class_apex</code></b>
              (<code>Any</code>, default:
                  <code>4</code>
)
          –
          <div class="doc-md-description">
            <p>A value representing the "apex" classification of a node.
Default is <code>4</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_limb_limb</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>10000</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where both connected nodes are classified as "limb".
Default is <code>10000</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_apex_apex</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>10000</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where both connected nodes are classified as "apex".
Default is <code>10000</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_apex_mainstem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>10000</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where one node is classified as "apex" and the other as "mainstem".
Default is <code>10000</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_limb_apex</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>10000</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where one node is classified as "limb" and the other as "apex".
Default is <code>10000</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_limb_mainstem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>10000</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where one node is classified as "limb" and the other as "mainstem".
Default is <code>10000</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_linear_mainstem</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where one node is classified as "linear" and the other as "mainstem".
Default is <code>0</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_linear_linear</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where both connected nodes are classified as "linear".
Default is <code>0</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_linear_limb</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where one node is classified as "linear" and the other as "limb".
Default is <code>0</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>weight_linear_apex</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The weight assigned to edges where one node is classified as "linear" and the other as "apex".
Default is <code>0</code>.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>The function modifies the provided graph <code>QG</code> in place. It adds a new edge attribute
  named <code>weight_sem_paths</code> to store the computed weights.</li>
<li>If node classifications for a given edge do not match any of the specified categories</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>spectral_clustering/quotientgraph_semantics.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">649</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">650</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">651</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">652</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">653</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">654</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">655</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">656</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">657</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">658</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">659</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">660</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">661</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">662</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">663</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">664</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">665</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">666</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">667</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">668</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">669</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">670</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">671</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">672</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">673</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">674</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">675</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">676</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">677</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">678</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">679</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">680</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">681</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">682</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">683</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">684</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">685</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">686</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">687</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">688</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">689</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">690</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">691</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">692</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">693</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">694</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">695</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">696</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">697</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">698</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">699</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">700</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">701</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">702</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">703</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">704</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">705</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">706</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">707</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">708</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">709</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">710</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">711</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">712</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">713</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">714</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">715</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">716</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">717</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">718</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">719</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">720</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">721</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">722</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">723</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">724</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">725</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">726</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">727</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">728</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">729</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">730</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">731</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">732</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">733</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">734</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">735</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">736</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">737</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">738</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">739</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">740</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">741</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">weight_with_semantic</span>(QG, class_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;viterbi_class&#39;</span>, class_limb<span style="color: #666">=1</span>, class_mainstem<span style="color: #666">=3</span>, class_linear<span style="color: #666">=0</span>,
                         class_apex<span style="color: #666">=4</span>,
                         weight_limb_limb<span style="color: #666">=10000</span>, weight_apex_apex<span style="color: #666">=10000</span>, weight_apex_mainstem<span style="color: #666">=10000</span>,
                         weight_limb_apex<span style="color: #666">=10000</span>, weight_limb_mainstem<span style="color: #666">=10000</span>, weight_linear_mainstem<span style="color: #666">=0</span>,
                         weight_linear_linear<span style="color: #666">=0</span>,
                         weight_linear_limb<span style="color: #666">=0</span>, weight_linear_apex<span style="color: #666">=0</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Assigns semantic weights to the edges of a graph based on node classifications.</span>

<span style="color: #BA2121; font-style: italic">    This function iterates over all edges in the provided graph `QG` and assigns a weight</span>
<span style="color: #BA2121; font-style: italic">    to each edge depending on the classification of its connected nodes. The classification</span>
<span style="color: #BA2121; font-style: italic">    of the nodes is determined using the `class_attribute` parameter. Different combinations</span>
<span style="color: #BA2121; font-style: italic">    or sets of node categories (e.g., `class_limb`, `class_apex`) have corresponding weights</span>
<span style="color: #BA2121; font-style: italic">    that are specified as input arguments to the function.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : spectral_clustering.quotientgraph.QuotientGraph</span>
<span style="color: #BA2121; font-style: italic">        The graph whose edges will be assigned weights based on the semantic relationships</span>
<span style="color: #BA2121; font-style: italic">        between connected nodes.</span>
<span style="color: #BA2121; font-style: italic">    class_attribute : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The node attribute in `QG` used to determine the category of the nodes.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``&#39;viterbi_class&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    class_limb : Any, optional</span>
<span style="color: #BA2121; font-style: italic">        A value representing the &quot;limb&quot; classification of a node.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``1``.</span>
<span style="color: #BA2121; font-style: italic">    class_mainstem : Any, optional</span>
<span style="color: #BA2121; font-style: italic">        A value representing the &quot;mainstem&quot; classification of a node.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``3``.</span>
<span style="color: #BA2121; font-style: italic">    class_linear : Any, optional</span>
<span style="color: #BA2121; font-style: italic">        A value representing the &quot;linear&quot; classification of a node.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``0``.</span>
<span style="color: #BA2121; font-style: italic">    class_apex : Any, optional</span>
<span style="color: #BA2121; font-style: italic">        A value representing the &quot;apex&quot; classification of a node.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``4``.</span>
<span style="color: #BA2121; font-style: italic">    weight_limb_limb : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where both connected nodes are classified as &quot;limb&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``10000``.</span>
<span style="color: #BA2121; font-style: italic">    weight_apex_apex : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where both connected nodes are classified as &quot;apex&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``10000``.</span>
<span style="color: #BA2121; font-style: italic">    weight_apex_mainstem : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where one node is classified as &quot;apex&quot; and the other as &quot;mainstem&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``10000``.</span>
<span style="color: #BA2121; font-style: italic">    weight_limb_apex : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where one node is classified as &quot;limb&quot; and the other as &quot;apex&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``10000``.</span>
<span style="color: #BA2121; font-style: italic">    weight_limb_mainstem : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where one node is classified as &quot;limb&quot; and the other as &quot;mainstem&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``10000``.</span>
<span style="color: #BA2121; font-style: italic">    weight_linear_mainstem : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where one node is classified as &quot;linear&quot; and the other as &quot;mainstem&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``0``.</span>
<span style="color: #BA2121; font-style: italic">    weight_linear_linear : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where both connected nodes are classified as &quot;linear&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``0``.</span>
<span style="color: #BA2121; font-style: italic">    weight_linear_limb : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where one node is classified as &quot;linear&quot; and the other as &quot;limb&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``0``.</span>
<span style="color: #BA2121; font-style: italic">    weight_linear_apex : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The weight assigned to edges where one node is classified as &quot;linear&quot; and the other as &quot;apex&quot;.</span>
<span style="color: #BA2121; font-style: italic">        Default is ``0``.</span>

<span style="color: #BA2121; font-style: italic">    Notes</span>
<span style="color: #BA2121; font-style: italic">    -----</span>
<span style="color: #BA2121; font-style: italic">    - The function modifies the provided graph `QG` in place. It adds a new edge attribute</span>
<span style="color: #BA2121; font-style: italic">      named `weight_sem_paths` to store the computed weights.</span>
<span style="color: #BA2121; font-style: italic">    - If node classifications for a given edge do not match any of the specified categories</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    <span style="color: #008000; font-weight: bold">for</span> e <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>edges():
        QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> np<span style="color: #666">.</span>nan
        c1 <span style="color: #666">=</span> QG<span style="color: #666">.</span>nodes[e[<span style="color: #666">0</span>]][class_attribute]
        c2 <span style="color: #666">=</span> QG<span style="color: #666">.</span>nodes[e[<span style="color: #666">1</span>]][class_attribute]
        l <span style="color: #666">=</span> [c1, c2]
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_limb, class_limb}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_limb_limb
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_limb, class_mainstem}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_limb_mainstem
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_limb, class_apex}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_limb_apex
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_limb, class_linear}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_linear_limb

        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_apex, class_apex}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_apex_apex
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_apex, class_mainstem}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_apex_mainstem
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_apex, class_linear}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_linear_apex

        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_linear, class_linear}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_linear_linear
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">set</span>(l) <span style="color: #666">==</span> {class_linear, class_mainstem}:
            QG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;weight_sem_paths&#39;</span>] <span style="color: #666">=</span> weight_linear_mainstem
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      The ROMI project has received funding from the European Community’s H2020 Programme under Grant Agreement No. 773875.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ROMI_EU_PROJECT" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/ROMIEUProject" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/romi/spectral-clustering" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/repository/docker/roboticsmicrofarms/plantimager/general" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../../../assets/_markdown_exec_pyodide.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="https://buttons.github.io/buttons.js"></script>
      
    
  </body>
</html>