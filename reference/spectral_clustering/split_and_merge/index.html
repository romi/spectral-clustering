
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Spectral Clustering documentation.">
      
      
        <meta name="author" content="ROMI Team">
      
      
        <link rel="canonical" href="https://romi.github.io/spectral-clustering/reference/spectral_clustering/split_and_merge/">
      
      
        <link rel="prev" href="../similarity_graph/">
      
      
        <link rel="next" href="../topological_energy/">
      
      
      <link rel="icon" href="../../../assets/images/ROMI_ICON_green.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>split_and_merge - SpectralClustering</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a40c8224.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Nunito Sans";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spectral_clustering.split_and_merge" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://romi.github.io/spectral-clustering/" title="SpectralClustering" class="md-header__button md-logo" aria-label="SpectralClustering" data-md-component="logo">
      
  <img src="../../../assets/images/ROMI_logo_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SpectralClustering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              split_and_merge
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/romi/spectral-clustering" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../dev/" class="md-tabs__link">
        
  
    
  
  Developers

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Reference API

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://romi.github.io/spectral-clustering/" title="SpectralClustering" class="md-nav__button md-logo" aria-label="SpectralClustering" data-md-component="logo">
      
  <img src="../../../assets/images/ROMI_logo_white.svg" alt="logo">

    </a>
    SpectralClustering
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/romi/spectral-clustering" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    spectral_clustering
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            spectral_clustering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Segmentation_Dijkstra_litt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Segmentation_Dijkstra_litt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Viterbi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viterbi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../branching_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    branching_graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../constraint_program/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    constraint_program
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dijkstra_segmentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dijkstra_segmentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../display_and_export/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    display_and_export
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    evaluation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../point_cloud_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_cloud_graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quotient_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quotient_graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quotientgraph_operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quotientgraph_operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quotientgraph_semantics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quotientgraph_semantics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../segmentation_algorithms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    segmentation_algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../similarity_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    similarity_graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    split_and_merge
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    split_and_merge
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge" class="md-nav__link">
    <span class="md-ellipsis">
      split_and_merge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.create_a_subgraph_copy" class="md-nav__link">
    <span class="md-ellipsis">
      create_a_subgraph_copy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.create_subgraphs_to_work" class="md-nav__link">
    <span class="md-ellipsis">
      create_subgraphs_to_work
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.opti_energy_dot_product" class="md-nav__link">
    <span class="md-ellipsis">
      opti_energy_dot_product
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.opti_energy_dot_product_old" class="md-nav__link">
    <span class="md-ellipsis">
      opti_energy_dot_product_old
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.oversegment_part" class="md-nav__link">
    <span class="md-ellipsis">
      oversegment_part
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.oversegment_part_return_list" class="md-nav__link">
    <span class="md-ellipsis">
      oversegment_part_return_list
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.resegment_nodes_with_elbow_method" class="md-nav__link">
    <span class="md-ellipsis">
      resegment_nodes_with_elbow_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.select_all_quotientgraph_nodes_from_pointcloudgraph_cluster" class="md-nav__link">
    <span class="md-ellipsis">
      select_all_quotientgraph_nodes_from_pointcloudgraph_cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.select_minimum_centroid_class" class="md-nav__link">
    <span class="md-ellipsis">
      select_minimum_centroid_class
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topological_energy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    topological_energy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_16" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../utils/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    utils
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_16" id="__nav_3_1_16_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_16">
            <span class="md-nav__icon md-icon"></span>
            utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/angle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    angle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/size/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    size
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/sparse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sparse
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge" class="md-nav__link">
    <span class="md-ellipsis">
      split_and_merge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.create_a_subgraph_copy" class="md-nav__link">
    <span class="md-ellipsis">
      create_a_subgraph_copy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.create_subgraphs_to_work" class="md-nav__link">
    <span class="md-ellipsis">
      create_subgraphs_to_work
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.opti_energy_dot_product" class="md-nav__link">
    <span class="md-ellipsis">
      opti_energy_dot_product
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.opti_energy_dot_product_old" class="md-nav__link">
    <span class="md-ellipsis">
      opti_energy_dot_product_old
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.oversegment_part" class="md-nav__link">
    <span class="md-ellipsis">
      oversegment_part
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.oversegment_part_return_list" class="md-nav__link">
    <span class="md-ellipsis">
      oversegment_part_return_list
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.resegment_nodes_with_elbow_method" class="md-nav__link">
    <span class="md-ellipsis">
      resegment_nodes_with_elbow_method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.select_all_quotientgraph_nodes_from_pointcloudgraph_cluster" class="md-nav__link">
    <span class="md-ellipsis">
      select_all_quotientgraph_nodes_from_pointcloudgraph_cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spectral_clustering.split_and_merge.select_minimum_centroid_class" class="md-nav__link">
    <span class="md-ellipsis">
      select_minimum_centroid_class
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>split_and_merge</h1>

<div class="doc doc-object doc-module">



<a id="spectral_clustering.split_and_merge"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.create_a_subgraph_copy" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_a_subgraph_copy</span>


<a href="#spectral_clustering.split_and_merge.create_a_subgraph_copy" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>create_a_subgraph_copy(G, list_of_nodes<span style="color: #666">=</span>[])
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates a subgraph as a copy based on the given list of nodes. This function preserves the
attributes of the original graph and nodes. If the graph is a multigraph, it copies all
edges and their attributes for the specified nodes; otherwise, it works with simple graphs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>G</code></b>
              (<code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a> or <a class="autorefs autorefs-external" title="networkx.DiGraph" href="https://networkx.org/documentation/stable/reference/classes/digraph.html#networkx.DiGraph">DiGraph</a> or <a class="autorefs autorefs-external" title="networkx.MultiGraph" href="https://networkx.org/documentation/stable/reference/classes/multigraph.html#networkx.MultiGraph">MultiGraph</a> or <a class="autorefs autorefs-external" title="networkx.MultiDiGraph" href="https://networkx.org/documentation/stable/reference/classes/multidigraph.html#networkx.MultiDiGraph">MultiDiGraph</a></code>)
          –
          <div class="doc-md-description">
            <p>The original graph from which the subgraph is to be created. This can be any NetworkX
graph instance.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_of_nodes</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>, default:
                  <code>[]</code>
)
          –
          <div class="doc-md-description">
            <p>A list of nodes to be included in the subgraph. If not provided, an empty list will
result in a subgraph with no nodes. Each node in this list must exist in the original
graph.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<b><code>SG</code></b> (              <code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a> or <a class="autorefs autorefs-external" title="networkx.DiGraph" href="https://networkx.org/documentation/stable/reference/classes/digraph.html#networkx.DiGraph">DiGraph</a> or <a class="autorefs autorefs-external" title="networkx.MultiGraph" href="https://networkx.org/documentation/stable/reference/classes/multigraph.html#networkx.MultiGraph">MultiGraph</a> or <a class="autorefs autorefs-external" title="networkx.MultiDiGraph" href="https://networkx.org/documentation/stable/reference/classes/multidigraph.html#networkx.MultiDiGraph">MultiDiGraph</a></code>
)          –
          <div class="doc-md-description">
            <p>A deep copy of the subgraph containing only the nodes and edges specified by the
<code>list_of_nodes</code>. The type of the resulting graph matches the type of the input graph.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">138</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">139</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">140</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">141</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">142</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">143</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">144</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">145</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">146</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">147</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">148</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">149</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">150</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">151</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">152</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">153</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">154</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">155</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">156</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">157</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">158</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">159</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">160</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">161</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">162</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">163</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">164</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">165</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">166</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">167</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">168</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">169</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">170</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">171</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">172</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">173</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">174</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">create_a_subgraph_copy</span>(G, list_of_nodes<span style="color: #666">=</span>[]):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Creates a subgraph as a copy based on the given list of nodes. This function preserves the</span>
<span style="color: #BA2121; font-style: italic">    attributes of the original graph and nodes. If the graph is a multigraph, it copies all</span>
<span style="color: #BA2121; font-style: italic">    edges and their attributes for the specified nodes; otherwise, it works with simple graphs.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    G : networkx.Graph or networkx.DiGraph or networkx.MultiGraph or networkx.MultiDiGraph</span>
<span style="color: #BA2121; font-style: italic">        The original graph from which the subgraph is to be created. This can be any NetworkX</span>
<span style="color: #BA2121; font-style: italic">        graph instance.</span>

<span style="color: #BA2121; font-style: italic">    list_of_nodes : list, optional</span>
<span style="color: #BA2121; font-style: italic">        A list of nodes to be included in the subgraph. If not provided, an empty list will</span>
<span style="color: #BA2121; font-style: italic">        result in a subgraph with no nodes. Each node in this list must exist in the original</span>
<span style="color: #BA2121; font-style: italic">        graph.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    SG : networkx.Graph or networkx.DiGraph or networkx.MultiGraph or networkx.MultiDiGraph</span>
<span style="color: #BA2121; font-style: italic">        A deep copy of the subgraph containing only the nodes and edges specified by the</span>
<span style="color: #BA2121; font-style: italic">        `list_of_nodes`. The type of the resulting graph matches the type of the input graph.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    largest_wcc <span style="color: #666">=</span> list_of_nodes
    SG <span style="color: #666">=</span> G<span style="color: #666">.</span><span style="color: #19177C">__class__</span>()
    SG<span style="color: #666">.</span>add_nodes_from((n, G<span style="color: #666">.</span>nodes[n]) <span style="color: #008000; font-weight: bold">for</span> n <span style="color: #A2F; font-weight: bold">in</span> largest_wcc)
    <span style="color: #008000; font-weight: bold">if</span> SG<span style="color: #666">.</span>is_multigraph():
        SG<span style="color: #666">.</span>add_edges_from((n, nbr, key, d)
                          <span style="color: #008000; font-weight: bold">for</span> n, nbrs <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>adj<span style="color: #666">.</span>items() <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #A2F; font-weight: bold">in</span> largest_wcc
                          <span style="color: #008000; font-weight: bold">for</span> nbr, keydict <span style="color: #A2F; font-weight: bold">in</span> nbrs<span style="color: #666">.</span>items() <span style="color: #008000; font-weight: bold">if</span> nbr <span style="color: #A2F; font-weight: bold">in</span> largest_wcc
                          <span style="color: #008000; font-weight: bold">for</span> key, d <span style="color: #A2F; font-weight: bold">in</span> keydict<span style="color: #666">.</span>items())
    <span style="color: #008000; font-weight: bold">else</span>:
        SG<span style="color: #666">.</span>add_edges_from((n, nbr, d)
                          <span style="color: #008000; font-weight: bold">for</span> n, nbrs <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>adj<span style="color: #666">.</span>items() <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #A2F; font-weight: bold">in</span> largest_wcc
                          <span style="color: #008000; font-weight: bold">for</span> nbr, d <span style="color: #A2F; font-weight: bold">in</span> nbrs<span style="color: #666">.</span>items() <span style="color: #008000; font-weight: bold">if</span> nbr <span style="color: #A2F; font-weight: bold">in</span> largest_wcc)
    SG<span style="color: #666">.</span>graph<span style="color: #666">.</span>update(G<span style="color: #666">.</span>graph)
    <span style="color: #008000; font-weight: bold">return</span> SG
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.create_subgraphs_to_work" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_subgraphs_to_work</span>


<a href="#spectral_clustering.split_and_merge.create_subgraphs_to_work" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>create_subgraphs_to_work(quotientgraph, list_quotient_node_to_work<span style="color: #666">=</span>[])
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates subgraphs from the given quotient graph by focusing on specific nodes to work with.
This function builds a Riemannian subgraph using the original graph stored in the given
quotient graph, and includes the nodes mapped to specified quotient graph nodes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code>Any</code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph object that contains the point cloud graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_quotient_node_to_work</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>, default:
                  <code>[]</code>
)
          –
          <div class="doc-md-description">
            <p>List of nodes in the quotient graph for which the corresponding nodes in the point
cloud graph will be included in the subgraph. Defaults to an empty list.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a></code>
          –
          <div class="doc-md-description">
            <p>The created subgraph that includes all the nodes from the original graph associated
with the given list of quotient graph nodes.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">413</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">414</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">415</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">416</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">417</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">418</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">419</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">420</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">421</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">422</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">423</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">424</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">425</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">426</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">427</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">428</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">429</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">430</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">431</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">432</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">433</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">434</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">435</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">436</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">437</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">438</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">439</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">440</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">441</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">442</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">443</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">create_subgraphs_to_work</span>(quotientgraph, list_quotient_node_to_work<span style="color: #666">=</span>[]):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Creates subgraphs from the given quotient graph by focusing on specific nodes to work with.</span>
<span style="color: #BA2121; font-style: italic">    This function builds a Riemannian subgraph using the original graph stored in the given</span>
<span style="color: #BA2121; font-style: italic">    quotient graph, and includes the nodes mapped to specified quotient graph nodes.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : Any</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph object that contains the point cloud graph.</span>
<span style="color: #BA2121; font-style: italic">    list_quotient_node_to_work : list, optional</span>
<span style="color: #BA2121; font-style: italic">        List of nodes in the quotient graph for which the corresponding nodes in the point</span>
<span style="color: #BA2121; font-style: italic">        cloud graph will be included in the subgraph. Defaults to an empty list.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    networkx.Graph</span>
<span style="color: #BA2121; font-style: italic">        The created subgraph that includes all the nodes from the original graph associated</span>
<span style="color: #BA2121; font-style: italic">        with the given list of quotient graph nodes.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    lqg <span style="color: #666">=</span> list_quotient_node_to_work
    G <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>point_cloud_graph

    lpcd <span style="color: #666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> qnode <span style="color: #A2F; font-weight: bold">in</span> lqg:
        list_of_nodes_each <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> qnode]
        lpcd <span style="color: #666">+=</span> list_of_nodes_each

    subgraph_riemannian <span style="color: #666">=</span> nx<span style="color: #666">.</span>subgraph(G, lpcd)

    <span style="color: #008000; font-weight: bold">return</span> subgraph_riemannian
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.opti_energy_dot_product" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">opti_energy_dot_product</span>


<a href="#spectral_clustering.split_and_merge.opti_energy_dot_product" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>opti_energy_dot_product(quotientgraph, subgraph_riemannian, angle_to_stop<span style="color: #666">=30</span>, export_iter<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>, list_leaves<span style="color: #666">=</span>[])
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Optimize graph energy by iteratively merging nodes based on dot product energy.</p>
<p>This function modifies the given quotient graph and its subgraph to iteratively
optimize energy by merging nodes connected by edges with the lowest energy.
The merging process involves updating node attributes and subgraph structures.
Optionally, iteration results can be exported or visualized after each update.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph on which optimization is performed. This is modified in
place and used in conjunction with its associated point cloud graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>subgraph_riemannian</code></b>
              (<code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a></code>)
          –
          <div class="doc-md-description">
            <p>A subgraph of the quotient graph focusing on a particular region of the
point cloud. This graph plays a key role in computing and organizing
cluster information.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>angle_to_stop</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>30</code>
)
          –
          <div class="doc-md-description">
            <p>The angle (in degrees) that determines the stopping criterion for energy
optimization. The default is 30 degrees. The energy to stop is computed
as <code>1 - cos(angle_to_stop)</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>export_iter</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Boolean flag to specify if intermediate results of the quotient graph
optimization should be exported. The default is True.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_leaves</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>, default:
                  <code>[]</code>
)
          –
          <div class="doc-md-description">
            <p>A list of node identifiers in the graph that are considered leaves.
These nodes may affect energy calculations during optimization.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">177</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">178</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">179</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">180</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">181</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">182</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">183</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">184</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">185</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">186</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">187</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">188</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">189</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">190</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">191</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">192</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">193</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">194</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">195</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">196</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">197</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">198</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">199</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">200</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">201</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">202</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">203</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">204</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">205</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">206</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">207</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">208</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">209</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">210</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">211</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">212</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">213</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">214</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">215</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">216</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">217</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">218</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">219</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">220</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">221</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">222</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">223</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">224</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">225</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">226</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">227</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">228</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">229</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">230</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">231</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">232</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">233</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">234</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">235</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">236</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">237</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">238</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">239</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">240</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">241</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">242</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">243</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">244</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">245</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">246</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">247</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">248</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">249</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">250</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">251</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">252</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">253</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">254</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">255</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">256</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">257</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">258</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">259</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">260</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">261</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">262</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">263</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">264</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">265</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">266</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">267</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">268</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">269</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">270</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">271</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">272</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">273</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">274</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">275</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">276</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">277</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">278</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">279</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">280</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">281</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">282</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">283</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">284</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">285</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">286</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">287</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">288</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">289</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">290</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">291</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">292</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">opti_energy_dot_product</span>(quotientgraph, subgraph_riemannian, angle_to_stop<span style="color: #666">=30</span>,
                            export_iter<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>, list_leaves<span style="color: #666">=</span>[]):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Optimize graph energy by iteratively merging nodes based on dot product energy.</span>

<span style="color: #BA2121; font-style: italic">    This function modifies the given quotient graph and its subgraph to iteratively</span>
<span style="color: #BA2121; font-style: italic">    optimize energy by merging nodes connected by edges with the lowest energy.</span>
<span style="color: #BA2121; font-style: italic">    The merging process involves updating node attributes and subgraph structures.</span>
<span style="color: #BA2121; font-style: italic">    Optionally, iteration results can be exported or visualized after each update.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : networkx.Graph</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph on which optimization is performed. This is modified in</span>
<span style="color: #BA2121; font-style: italic">        place and used in conjunction with its associated point cloud graph.</span>

<span style="color: #BA2121; font-style: italic">    subgraph_riemannian : networkx.Graph</span>
<span style="color: #BA2121; font-style: italic">        A subgraph of the quotient graph focusing on a particular region of the</span>
<span style="color: #BA2121; font-style: italic">        point cloud. This graph plays a key role in computing and organizing</span>
<span style="color: #BA2121; font-style: italic">        cluster information.</span>

<span style="color: #BA2121; font-style: italic">    angle_to_stop : float, optional</span>
<span style="color: #BA2121; font-style: italic">        The angle (in degrees) that determines the stopping criterion for energy</span>
<span style="color: #BA2121; font-style: italic">        optimization. The default is 30 degrees. The energy to stop is computed</span>
<span style="color: #BA2121; font-style: italic">        as `1 - cos(angle_to_stop)`.</span>

<span style="color: #BA2121; font-style: italic">    export_iter : bool, optional</span>
<span style="color: #BA2121; font-style: italic">        Boolean flag to specify if intermediate results of the quotient graph</span>
<span style="color: #BA2121; font-style: italic">        optimization should be exported. The default is True.</span>

<span style="color: #BA2121; font-style: italic">    list_leaves : list, optional</span>
<span style="color: #BA2121; font-style: italic">        A list of node identifiers in the graph that are considered leaves.</span>
<span style="color: #BA2121; font-style: italic">        These nodes may affect energy calculations during optimization.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    energy_to_stop <span style="color: #666">=</span> <span style="color: #666">1</span> <span style="color: #666">-</span> np<span style="color: #666">.</span>cos(np<span style="color: #666">.</span>radians(angle_to_stop))
    <span style="color: #3D7B7B; font-style: italic"># take the edge of higher energy and fuse the two nodes involved, then rebuilt the graph, export and redo</span>
    energy_min <span style="color: #666">=</span> <span style="color: #666">0</span>
    i <span style="color: #666">=</span> <span style="color: #666">0</span>
    SG <span style="color: #666">=</span> subgraph_riemannian
    <span style="color: #3D7B7B; font-style: italic"># Create a hard copy subgraph of the quotient graph to compute the energy on a focused part</span>
    list_quotient_node_to_work <span style="color: #666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> no <span style="color: #A2F; font-weight: bold">in</span> SG<span style="color: #666">.</span>nodes:
        list_quotient_node_to_work<span style="color: #666">.</span>append(SG<span style="color: #666">.</span>nodes[no][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>])
    list_of_new_quotient_graph_nodes <span style="color: #666">=</span> <span style="color: #008000">list</span>(<span style="color: #008000">set</span>(list_quotient_node_to_work))
    SQG <span style="color: #666">=</span> create_a_subgraph_copy(quotientgraph, list_of_new_quotient_graph_nodes)
    SQG<span style="color: #666">.</span>point_cloud_graph <span style="color: #666">=</span> SG
    SQG<span style="color: #666">.</span>compute_direction_info(list_leaves<span style="color: #666">=</span>list_leaves)

    <span style="color: #008000; font-weight: bold">while</span> energy_min <span style="color: #666">&lt;</span> energy_to_stop:
        <span style="color: #3D7B7B; font-style: italic"># compute energy on nodes</span>
        start1 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
        end1 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
        time1 <span style="color: #666">=</span> end1 <span style="color: #666">-</span> start1
        <span style="color: #008000">print</span>(time1)
        <span style="color: #3D7B7B; font-style: italic"># selection of the edge that bears the less energy</span>
        start2 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
        energy_per_edges <span style="color: #666">=</span> nx<span style="color: #666">.</span>get_edge_attributes(SQG, <span style="color: #BA2121">&#39;energy_dot_product&#39;</span>)
        edge_to_delete <span style="color: #666">=</span> <span style="color: #008000">min</span>(energy_per_edges<span style="color: #666">.</span>items(), key<span style="color: #666">=</span>operator<span style="color: #666">.</span>itemgetter(<span style="color: #666">1</span>))[<span style="color: #666">0</span>]
        <span style="color: #008000">print</span>(edge_to_delete)
        <span style="color: #008000">print</span>(energy_per_edges[edge_to_delete])
        energy_min <span style="color: #666">=</span> energy_per_edges[edge_to_delete]
        end2 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
        time2 <span style="color: #666">=</span> end2 <span style="color: #666">-</span> start2
        <span style="color: #008000">print</span>(time2)

        <span style="color: #3D7B7B; font-style: italic"># Update node direction mean and intra class node number</span>
        m1 <span style="color: #666">=</span> SQG<span style="color: #666">.</span>nodes[edge_to_delete[<span style="color: #666">0</span>]][<span style="color: #BA2121">&#39;dir_gradient_mean&#39;</span>]
        m2 <span style="color: #666">=</span> SQG<span style="color: #666">.</span>nodes[edge_to_delete[<span style="color: #666">1</span>]][<span style="color: #BA2121">&#39;dir_gradient_mean&#39;</span>]
        n1 <span style="color: #666">=</span> SQG<span style="color: #666">.</span>nodes[edge_to_delete[<span style="color: #666">0</span>]][<span style="color: #BA2121">&#39;intra_class_node_number&#39;</span>]
        n2 <span style="color: #666">=</span> SQG<span style="color: #666">.</span>nodes[edge_to_delete[<span style="color: #666">1</span>]][<span style="color: #BA2121">&#39;intra_class_node_number&#39;</span>]
        SQG<span style="color: #666">.</span>nodes[edge_to_delete[<span style="color: #666">0</span>]][<span style="color: #BA2121">&#39;dir_gradient_mean&#39;</span>] <span style="color: #666">=</span> (<span style="color: #666">1</span> <span style="color: #666">/</span> (<span style="color: #666">1</span> <span style="color: #666">+</span> n2 <span style="color: #666">/</span> n1)) <span style="color: #666">*</span> m1 <span style="color: #666">+</span> (<span style="color: #666">1</span> <span style="color: #666">/</span> (<span style="color: #666">1</span> <span style="color: #666">+</span> n1 <span style="color: #666">/</span> n2)) <span style="color: #666">*</span> m2
        SQG<span style="color: #666">.</span>nodes[edge_to_delete[<span style="color: #666">0</span>]][<span style="color: #BA2121">&#39;intra_class_node_number&#39;</span>] <span style="color: #666">=</span> n1 <span style="color: #666">+</span> n2

        <span style="color: #3D7B7B; font-style: italic"># one cluster is merged into the other one, change of labels on the sub pointcloudgraph label</span>
        start3 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
        list_of_nodes <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> SG<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> edge_to_delete[<span style="color: #666">1</span>]]
        <span style="color: #008000; font-weight: bold">for</span> j <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(list_of_nodes)):
            SG<span style="color: #666">.</span>nodes[list_of_nodes[j]][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">=</span> edge_to_delete[<span style="color: #666">0</span>]
        end3 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
        time3 <span style="color: #666">=</span> end3 <span style="color: #666">-</span> start3
        <span style="color: #008000">print</span>(time3)
        start4 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()

        <span style="color: #3D7B7B; font-style: italic"># Update subgraph_quotient structure</span>
        SQG <span style="color: #666">=</span> nx<span style="color: #666">.</span>contracted_nodes(SQG, edge_to_delete[<span style="color: #666">0</span>], edge_to_delete[<span style="color: #666">1</span>], self_loops<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>)
        SQG<span style="color: #666">.</span>point_cloud_graph <span style="color: #666">=</span> SG
        end4 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
        time4 <span style="color: #666">=</span> end4 <span style="color: #666">-</span> start4
        <span style="color: #3D7B7B; font-style: italic"># Update dot energies</span>
        <span style="color: #008000; font-weight: bold">for</span> e <span style="color: #A2F; font-weight: bold">in</span> SQG<span style="color: #666">.</span>edges(edge_to_delete[<span style="color: #666">0</span>]):
            v1 <span style="color: #666">=</span> SQG<span style="color: #666">.</span>nodes[e[<span style="color: #666">0</span>]][<span style="color: #BA2121">&#39;dir_gradient_mean&#39;</span>]
            v2 <span style="color: #666">=</span> SQG<span style="color: #666">.</span>nodes[e[<span style="color: #666">1</span>]][<span style="color: #BA2121">&#39;dir_gradient_mean&#39;</span>]
            <span style="color: #008000; font-weight: bold">if</span> e[<span style="color: #666">0</span>] <span style="color: #A2F; font-weight: bold">in</span> list_leaves <span style="color: #A2F; font-weight: bold">or</span> e[<span style="color: #666">1</span>] <span style="color: #A2F; font-weight: bold">in</span> list_leaves:
                SQG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;energy_dot_product&#39;</span>] <span style="color: #666">=</span> <span style="color: #666">4</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                dot <span style="color: #666">=</span> v1[<span style="color: #666">0</span>] <span style="color: #666">*</span> v2[<span style="color: #666">0</span>] <span style="color: #666">+</span> v1[<span style="color: #666">1</span>] <span style="color: #666">*</span> v2[<span style="color: #666">1</span>] <span style="color: #666">+</span> v1[<span style="color: #666">2</span>] <span style="color: #666">*</span> v2[<span style="color: #666">2</span>]
                energy_dot_product <span style="color: #666">=</span> <span style="color: #666">1</span> <span style="color: #666">-</span> dot
                SQG<span style="color: #666">.</span>edges[e][<span style="color: #BA2121">&#39;energy_dot_product&#39;</span>] <span style="color: #666">=</span> energy_dot_product

        <span style="color: #008000">print</span>(time4)
        <span style="color: #008000">print</span>(<span style="color: #BA2121">&#39;end loop&#39;</span>)

        <span style="color: #008000; font-weight: bold">if</span> export_iter:
            export_some_graph_attributes_on_point_cloud(pcd_g<span style="color: #666">=</span>quotientgraph<span style="color: #666">.</span>point_cloud_graph,
                                                        graph_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>,
                                                        filename<span style="color: #666">=</span><span style="color: #BA2121">&#39;graph_attribute_quotient_graph_&#39;</span> <span style="color: #666">+</span> <span style="color: #008000">str</span>(i) <span style="color: #666">+</span> <span style="color: #BA2121">&#39;.txt&#39;</span>)
            <span style="color: #3D7B7B; font-style: italic"># display_and_export_quotient_graph_matplotlib(quotient_graph=quotientgraph, node_sizes=20,</span>
            <span style="color: #3D7B7B; font-style: italic"># filename=&quot;quotient_graph_matplotlib_QG_intra_class_number_&quot; + str(</span>
            <span style="color: #3D7B7B; font-style: italic">#    i),</span>
            <span style="color: #3D7B7B; font-style: italic"># data_on_nodes=&#39;intra_class_node_number&#39;)</span>
        i <span style="color: #666">+=</span> <span style="color: #666">1</span>

    quotientgraph<span style="color: #666">.</span>rebuild(G<span style="color: #666">=</span>quotientgraph<span style="color: #666">.</span>point_cloud_graph)
    export_some_graph_attributes_on_point_cloud(pcd_g<span style="color: #666">=</span>quotientgraph<span style="color: #666">.</span>point_cloud_graph,
                                                graph_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>,
                                                filename<span style="color: #666">=</span><span style="color: #BA2121">&#39;final_opti_energy_dot_product.txt&#39;</span>)
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.opti_energy_dot_product_old" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">opti_energy_dot_product_old</span>


<a href="#spectral_clustering.split_and_merge.opti_energy_dot_product_old" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>opti_energy_dot_product_old(quotientgraph, energy_to_stop<span style="color: #666">=0.13</span>, leaves_out<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>, list_graph_node_to_work<span style="color: #666">=</span>[], export_iter<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Optimize the energy dot product in a graph by iteratively fusing nodes with higher energy edges,
rebuilding the graph, and exporting the results. The method modifies the graph and performs operations
like edge energy computation, label updates, and graph attribute exports.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a></code>)
          –
          <div class="doc-md-description">
            <p>A graph object representing the quotient graph. Assumes it has methods to compute direction info,
rebuild the graph, and attributes related to the point cloud graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>energy_to_stop</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0.13</code>
)
          –
          <div class="doc-md-description">
            <p>Threshold energy value to stop the optimization process. Default is 0.13.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>leaves_out</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, treats the graph clusters excluding the leaf nodes during the optimization steps.
Default is False.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_graph_node_to_work</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>, default:
                  <code>[]</code>
)
          –
          <div class="doc-md-description">
            <p>A list of specific graph nodes from the point cloud to consider during the optimization process.
If empty, the method will compute and process all edges with energy details in the graph. Default is an empty list.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>export_iter</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True, exports graph attributes and visualizations at every iteration of the optimization process.
Default is True.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <p>This function is designed for specialized usage with quotient graphs and associated point cloud graphs.
The graph manipulation includes operations like merging graph nodes associated by minimum energy,
updating attributes in the point cloud graph, and regenerating the quotient graph. The energy is
calculated between nodes or edges, directly impacting the choice of clusters or edges for merging.
Repeated iterations are performed until the minimum energy exceeds the specified <code>energy_to_stop</code>
value. Optionally, leaf nodes may be excluded during processing to focus on core clusters.</p>
<p>The function also relies on external calls, such as exporting attributes to a file and displaying
the resulting quotient graphs using matplotlib. These external utilities must be implemented
separately, and their proper functioning is assumed.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 36</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 37</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 38</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 39</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 40</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 41</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 42</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 43</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 44</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 45</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 46</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 47</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 48</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 49</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 50</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 51</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 52</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 53</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 54</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 55</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 56</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 57</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 58</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 59</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 60</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 61</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 62</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 63</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 64</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 65</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 66</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 67</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 68</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 69</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 70</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 71</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 72</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 73</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 74</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 75</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 76</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 77</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 78</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 79</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 80</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 81</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 82</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 83</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 84</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 85</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 86</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 87</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 88</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 89</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 90</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 91</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 92</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 93</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 94</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 95</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 96</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 97</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 98</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 99</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">100</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">101</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">102</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">103</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">104</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">105</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">106</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">107</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">108</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">109</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">110</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">111</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">112</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">113</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">114</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">115</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">116</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">117</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">118</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">119</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">120</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">121</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">122</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">123</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">124</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">125</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">126</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">127</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">128</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">129</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">130</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">131</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">132</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">133</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">134</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">135</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">opti_energy_dot_product_old</span>(quotientgraph, energy_to_stop<span style="color: #666">=0.13</span>, leaves_out<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>, list_graph_node_to_work<span style="color: #666">=</span>[],
                                export_iter<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Optimize the energy dot product in a graph by iteratively fusing nodes with higher energy edges,</span>
<span style="color: #BA2121; font-style: italic">    rebuilding the graph, and exporting the results. The method modifies the graph and performs operations</span>
<span style="color: #BA2121; font-style: italic">    like edge energy computation, label updates, and graph attribute exports.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : object</span>
<span style="color: #BA2121; font-style: italic">        A graph object representing the quotient graph. Assumes it has methods to compute direction info,</span>
<span style="color: #BA2121; font-style: italic">        rebuild the graph, and attributes related to the point cloud graph.</span>
<span style="color: #BA2121; font-style: italic">    energy_to_stop : float, optional</span>
<span style="color: #BA2121; font-style: italic">        Threshold energy value to stop the optimization process. Default is 0.13.</span>
<span style="color: #BA2121; font-style: italic">    leaves_out : bool, optional</span>
<span style="color: #BA2121; font-style: italic">        If True, treats the graph clusters excluding the leaf nodes during the optimization steps.</span>
<span style="color: #BA2121; font-style: italic">        Default is False.</span>
<span style="color: #BA2121; font-style: italic">    list_graph_node_to_work : list, optional</span>
<span style="color: #BA2121; font-style: italic">        A list of specific graph nodes from the point cloud to consider during the optimization process.</span>
<span style="color: #BA2121; font-style: italic">        If empty, the method will compute and process all edges with energy details in the graph. Default is an empty list.</span>
<span style="color: #BA2121; font-style: italic">    export_iter : bool, optional</span>
<span style="color: #BA2121; font-style: italic">        If True, exports graph attributes and visualizations at every iteration of the optimization process.</span>
<span style="color: #BA2121; font-style: italic">        Default is True.</span>

<span style="color: #BA2121; font-style: italic">    Notes</span>
<span style="color: #BA2121; font-style: italic">    -----</span>
<span style="color: #BA2121; font-style: italic">    This function is designed for specialized usage with quotient graphs and associated point cloud graphs.</span>
<span style="color: #BA2121; font-style: italic">    The graph manipulation includes operations like merging graph nodes associated by minimum energy,</span>
<span style="color: #BA2121; font-style: italic">    updating attributes in the point cloud graph, and regenerating the quotient graph. The energy is</span>
<span style="color: #BA2121; font-style: italic">    calculated between nodes or edges, directly impacting the choice of clusters or edges for merging.</span>
<span style="color: #BA2121; font-style: italic">    Repeated iterations are performed until the minimum energy exceeds the specified `energy_to_stop`</span>
<span style="color: #BA2121; font-style: italic">    value. Optionally, leaf nodes may be excluded during processing to focus on core clusters.</span>

<span style="color: #BA2121; font-style: italic">    The function also relies on external calls, such as exporting attributes to a file and displaying</span>
<span style="color: #BA2121; font-style: italic">    the resulting quotient graphs using matplotlib. These external utilities must be implemented</span>
<span style="color: #BA2121; font-style: italic">    separately, and their proper functioning is assumed.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    <span style="color: #3D7B7B; font-style: italic"># take the edge of higher energy and fuse the two nodes involved, then rebuilt the graph, export and redo</span>
    list_leaves <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #A2F; font-weight: bold">in</span> quotientgraph<span style="color: #666">.</span>nodes() <span style="color: #008000; font-weight: bold">if</span> quotientgraph<span style="color: #666">.</span>degree(x) <span style="color: #666">==</span> <span style="color: #666">1</span>]
    energy_min <span style="color: #666">=</span> <span style="color: #666">0</span>
    i <span style="color: #666">=</span> <span style="color: #666">0</span>

    <span style="color: #008000; font-weight: bold">while</span> energy_min <span style="color: #666">&lt;</span> energy_to_stop:
        G <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>point_cloud_graph
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #A2F; font-weight: bold">not</span> list_graph_node_to_work:
            <span style="color: #3D7B7B; font-style: italic"># select the edge</span>
            quotientgraph<span style="color: #666">.</span>compute_direction_info(list_leaves)
            energy_per_edges <span style="color: #666">=</span> nx<span style="color: #666">.</span>get_edge_attributes(quotientgraph, <span style="color: #BA2121">&#39;energy_dot_product&#39;</span>)
            edge_to_delete <span style="color: #666">=</span> <span style="color: #008000">min</span>(energy_per_edges<span style="color: #666">.</span>items(), key<span style="color: #666">=</span>operator<span style="color: #666">.</span>itemgetter(<span style="color: #666">1</span>))[<span style="color: #666">0</span>]
            <span style="color: #008000">print</span>(edge_to_delete)
            <span style="color: #008000">print</span>(energy_per_edges[edge_to_delete])
            energy_min <span style="color: #666">=</span> energy_per_edges[edge_to_delete]
            <span style="color: #3D7B7B; font-style: italic"># make list of nodes inside the different quotient graph nodes to work with</span>
            list_of_nodes <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> edge_to_delete[<span style="color: #666">1</span>]]
            <span style="color: #008000; font-weight: bold">for</span> j <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(list_of_nodes)):
                G<span style="color: #666">.</span>nodes[list_of_nodes[j]][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">=</span> edge_to_delete[<span style="color: #666">0</span>]

        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #3D7B7B; font-style: italic"># retrieve the quotient graphe nodes that encapsulate the nodes from pointcloudgraph (list_graph_node_to_work)</span>
            list_quotient_node_to_work <span style="color: #666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> no <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(list_graph_node_to_work)):
                list_quotient_node_to_work<span style="color: #666">.</span>append(G<span style="color: #666">.</span>nodes[list_graph_node_to_work[no]][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>])
            list_of_new_quotient_graph_nodes <span style="color: #666">=</span> <span style="color: #008000">list</span>(<span style="color: #008000">set</span>(list_quotient_node_to_work))

            <span style="color: #3D7B7B; font-style: italic"># create a subgraph of the quotient graph with only the interesting nodes and compute energy on nodes</span>
            S <span style="color: #666">=</span> nx<span style="color: #666">.</span>subgraph(quotientgraph, list_of_new_quotient_graph_nodes)
            quotientgraph<span style="color: #666">.</span>compute_direction_info(list_leaves<span style="color: #666">=</span>[])
            <span style="color: #3D7B7B; font-style: italic"># selection of the edge that bears the less energy</span>
            energy_per_edges <span style="color: #666">=</span> nx<span style="color: #666">.</span>get_edge_attributes(S, <span style="color: #BA2121">&#39;energy_dot_product&#39;</span>)
            edge_to_delete <span style="color: #666">=</span> <span style="color: #008000">min</span>(energy_per_edges<span style="color: #666">.</span>items(), key<span style="color: #666">=</span>operator<span style="color: #666">.</span>itemgetter(<span style="color: #666">1</span>))[<span style="color: #666">0</span>]
            <span style="color: #008000">print</span>(edge_to_delete)
            <span style="color: #008000">print</span>(energy_per_edges[edge_to_delete])
            energy_min <span style="color: #666">=</span> energy_per_edges[edge_to_delete]
            <span style="color: #3D7B7B; font-style: italic"># one cluster is merged into the other one, change of labels on the pointcloudgraph label</span>
            list_of_nodes <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> edge_to_delete[<span style="color: #666">1</span>]]
            <span style="color: #008000; font-weight: bold">for</span> j <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(list_of_nodes)):
                G<span style="color: #666">.</span>nodes[list_of_nodes[j]][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">=</span> edge_to_delete[<span style="color: #666">0</span>]

        <span style="color: #008000; font-weight: bold">if</span> leaves_out:
            list_one_point_per_leaf <span style="color: #666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> l <span style="color: #A2F; font-weight: bold">in</span> list_leaves:
                list_one_point_per_leaf<span style="color: #666">.</span>append([x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> l][<span style="color: #666">0</span>])
            list_leaves <span style="color: #666">=</span> []
            <span style="color: #008000; font-weight: bold">for</span> p <span style="color: #A2F; font-weight: bold">in</span> list_one_point_per_leaf:
                list_leaves<span style="color: #666">.</span>append(G<span style="color: #666">.</span>nodes[p][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>])

        <span style="color: #008000; font-weight: bold">if</span> export_iter:
            export_some_graph_attributes_on_point_cloud(pcd_g<span style="color: #666">=</span>quotientgraph<span style="color: #666">.</span>point_cloud_graph,
                                                        graph_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>,
                                                        filename<span style="color: #666">=</span><span style="color: #BA2121">&#39;graph_attribute_quotient_graph_&#39;</span> <span style="color: #666">+</span> <span style="color: #008000">str</span>(i) <span style="color: #666">+</span> <span style="color: #BA2121">&#39;.txt&#39;</span>)
            quotientgraph<span style="color: #666">.</span>rebuild(G<span style="color: #666">=</span>quotientgraph<span style="color: #666">.</span>point_cloud_graph)
            display_and_export_quotient_graph_matplotlib(quotient_graph<span style="color: #666">=</span>quotientgraph, node_sizes<span style="color: #666">=20</span>,
                                                         filename<span style="color: #666">=</span><span style="color: #BA2121">&quot;quotient_graph_matplotlib_QG_intra_class_number_&quot;</span> <span style="color: #666">+</span> <span style="color: #008000">str</span>(
                                                             i),
                                                         data_on_nodes<span style="color: #666">=</span><span style="color: #BA2121">&#39;intra_class_node_number&#39;</span>)
        i <span style="color: #666">+=</span> <span style="color: #666">1</span>

    quotientgraph<span style="color: #666">.</span>rebuild(G<span style="color: #666">=</span>quotientgraph<span style="color: #666">.</span>point_cloud_graph)
    export_some_graph_attributes_on_point_cloud(pcd_g<span style="color: #666">=</span>quotientgraph<span style="color: #666">.</span>point_cloud_graph,
                                                graph_attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>,
                                                filename<span style="color: #666">=</span><span style="color: #BA2121">&#39;final_split_and_merge.txt&#39;</span>)

<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    # try to treat the clusters two by two, without the leaves in it. following a shortest path</span>
<span style="color: #BA2121; font-style: italic">    for l in list_leaves:</span>
<span style="color: #BA2121; font-style: italic">        if l != root:</span>
<span style="color: #BA2121; font-style: italic">            path = nx.bidirectional_shortest_path(quotientgraph, root, l)</span>
<span style="color: #BA2121; font-style: italic">            path.pop()</span>
<span style="color: #BA2121; font-style: italic">            path.pop(0)</span>
<span style="color: #BA2121; font-style: italic">            le = len(path)</span>
<span style="color: #BA2121; font-style: italic">            if len(path) &gt;= 2:                    </span>
<span style="color: #BA2121; font-style: italic">            for i in range(le-1):</span>
<span style="color: #BA2121; font-style: italic">                    quotientgraph.segment_several_nodes_using_attribute(list_quotient_node_to_work=[path[i], path[i+1]])</span>
<span style="color: #BA2121; font-style: italic">                G = quotientgraph.point_cloud_graph</span>
<span style="color: #BA2121; font-style: italic">                quotientgraph.rebuild(G)</span>


<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.oversegment_part" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">oversegment_part</span>


<a href="#spectral_clustering.split_and_merge.oversegment_part" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>oversegment_part(quotientgraph, subgraph_riemannian, average_size_cluster<span style="color: #666">=20</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Segments an input subgraph using clustering and updates the corresponding quotient graph.</p>
<p>This function performs oversegmentation of a given subgraph using the KMeans clustering
algorithm. It determines a number of clusters based on the average cluster size provided.
The resulting cluster labels are then integrated into the quotient graph to represent
the updated segmentation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a></code>)
          –
          <div class="doc-md-description">
            <p>The input quotient graph to be updated with new segmentation labels.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>subgraph_riemannian</code></b>
              (<code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a></code>)
          –
          <div class="doc-md-description">
            <p>The subgraph to be segmented, where each node must have a 'pos' attribute representing
its spatial coordinates.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>average_size_cluster</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>20</code>
)
          –
          <div class="doc-md-description">
            <p>The target average number of nodes per cluster. Defaults to 20.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <p>This function expects a Riemannian subgraph that includes spatial positions stored under the
'pos' node attribute. KMeans clustering is performed on these positions. The function also
assumes that the quotient graph has methods to update itself with new node labels. The
clustering process includes configuring KMeans to perform up to 20 runs (<code>n_init=20</code>) and
allow 300 iterations per run with specified tolerance.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">353</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">354</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">355</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">356</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">357</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">358</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">359</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">360</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">361</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">362</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">363</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">364</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">365</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">366</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">367</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">368</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">369</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">370</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">371</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">372</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">373</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">374</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">375</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">376</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">377</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">378</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">379</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">380</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">381</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">382</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">383</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">384</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">385</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">386</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">387</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">388</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">389</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">390</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">391</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">392</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">393</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">394</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">395</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">396</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">397</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">398</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">399</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">400</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">401</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">402</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">403</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">404</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">405</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">406</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">407</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">408</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">409</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">410</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">oversegment_part</span>(quotientgraph, subgraph_riemannian, average_size_cluster<span style="color: #666">=20</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Segments an input subgraph using clustering and updates the corresponding quotient graph.</span>

<span style="color: #BA2121; font-style: italic">    This function performs oversegmentation of a given subgraph using the KMeans clustering</span>
<span style="color: #BA2121; font-style: italic">    algorithm. It determines a number of clusters based on the average cluster size provided.</span>
<span style="color: #BA2121; font-style: italic">    The resulting cluster labels are then integrated into the quotient graph to represent</span>
<span style="color: #BA2121; font-style: italic">    the updated segmentation.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : object</span>
<span style="color: #BA2121; font-style: italic">        The input quotient graph to be updated with new segmentation labels.</span>

<span style="color: #BA2121; font-style: italic">    subgraph_riemannian : networkx.Graph</span>
<span style="color: #BA2121; font-style: italic">        The subgraph to be segmented, where each node must have a &#39;pos&#39; attribute representing</span>
<span style="color: #BA2121; font-style: italic">        its spatial coordinates.</span>

<span style="color: #BA2121; font-style: italic">    average_size_cluster : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The target average number of nodes per cluster. Defaults to 20.</span>

<span style="color: #BA2121; font-style: italic">    Notes</span>
<span style="color: #BA2121; font-style: italic">    -----</span>
<span style="color: #BA2121; font-style: italic">    This function expects a Riemannian subgraph that includes spatial positions stored under the</span>
<span style="color: #BA2121; font-style: italic">    &#39;pos&#39; node attribute. KMeans clustering is performed on these positions. The function also</span>
<span style="color: #BA2121; font-style: italic">    assumes that the quotient graph has methods to update itself with new node labels. The</span>
<span style="color: #BA2121; font-style: italic">    clustering process includes configuring KMeans to perform up to 20 runs (`n_init=20`) and</span>
<span style="color: #BA2121; font-style: italic">    allow 300 iterations per run with specified tolerance.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    SG <span style="color: #666">=</span> subgraph_riemannian

    <span style="color: #3D7B7B; font-style: italic"># get all the x,y,z coordinates in an np.array</span>
    t1 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
    Xcoord <span style="color: #666">=</span> np<span style="color: #666">.</span>zeros((<span style="color: #008000">len</span>(SG), <span style="color: #666">3</span>))
    <span style="color: #008000; font-weight: bold">for</span> u <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(SG)):
        Xcoord[u] <span style="color: #666">=</span> SG<span style="color: #666">.</span>nodes[<span style="color: #008000">list</span>(SG<span style="color: #666">.</span>nodes)[u]][<span style="color: #BA2121">&#39;pos&#39;</span>]
    t2 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
    <span style="color: #008000">print</span>(t2 <span style="color: #666">-</span> t1)
    <span style="color: #3D7B7B; font-style: italic"># determine a number of cluster we would like to have</span>
    number_of_points <span style="color: #666">=</span> <span style="color: #008000">len</span>(SG)
    number_of_clusters <span style="color: #666">=</span> number_of_points <span style="color: #666">/</span> average_size_cluster

    t3 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
    <span style="color: #3D7B7B; font-style: italic"># clustering via Kmeans to obtain new labels</span>
    clustering <span style="color: #666">=</span> skc<span style="color: #666">.</span>KMeans(n_clusters<span style="color: #666">=</span><span style="color: #008000">int</span>(number_of_clusters), init<span style="color: #666">=</span><span style="color: #BA2121">&#39;k-means++&#39;</span>, n_init<span style="color: #666">=20</span>, max_iter<span style="color: #666">=300</span>,
                            tol<span style="color: #666">=0.0001</span>)<span style="color: #666">.</span>fit(Xcoord)
    clustering_labels <span style="color: #666">=</span> clustering<span style="color: #666">.</span>labels_[:, np<span style="color: #666">.</span>newaxis] <span style="color: #666">+</span> <span style="color: #008000">max</span>(quotientgraph<span style="color: #666">.</span>nodes) <span style="color: #666">+</span> <span style="color: #666">1</span>
    t4 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
    <span style="color: #008000">print</span>(t4 <span style="color: #666">-</span> t3)
    <span style="color: #3D7B7B; font-style: italic"># Integration of the new labels in the quotient graph and updates</span>
    t5 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
    num <span style="color: #666">=</span> <span style="color: #666">0</span>
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> SG<span style="color: #666">.</span>nodes:
        SG<span style="color: #666">.</span>nodes[i][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">=</span> clustering_labels[num]
        num <span style="color: #666">+=</span> <span style="color: #666">1</span>
    quotientgraph<span style="color: #666">.</span>rebuild(quotientgraph<span style="color: #666">.</span>point_cloud_graph)
    t6 <span style="color: #666">=</span> time<span style="color: #666">.</span>time()
    <span style="color: #008000">print</span>(t6 <span style="color: #666">-</span> t5)
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.oversegment_part_return_list" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">oversegment_part_return_list</span>


<a href="#spectral_clustering.split_and_merge.oversegment_part_return_list" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>oversegment_part_return_list(quotientgraph, list_quotient_node_to_work<span style="color: #666">=</span>[], average_size_cluster<span style="color: #666">=20</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clusters points in a point cloud graph and updates the quotient graph nodes.</p>
<p>This function performs clustering on nodes within specified quotient graph nodes and updates
their associated quotient graph labels based on the clustering results. The updated
quotient graph integrates new labels for further processing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>quotientgraph</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph, which contains the point cloud graph structure (<code>point_cloud_graph</code>)
and nodes to be updated with new labels.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>list_quotient_node_to_work</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>, default:
                  <code>[]</code>
)
          –
          <div class="doc-md-description">
            <p>A list of quotient graph nodes to be processed. The nodes within these quotient graph
nodes are clustered and updated. Default is an empty list.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>average_size_cluster</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>20</code>
)
          –
          <div class="doc-md-description">
            <p>The average number of points per cluster, used to determine the desired number of
clusters during the clustering process. Default is 20.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>
          –
          <div class="doc-md-description">
            <p>A list of point cloud graph nodes (from the quotient graph node updates)
that were processed and are available for subsequent operations.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">295</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">296</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">297</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">298</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">299</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">300</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">301</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">302</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">303</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">304</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">305</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">306</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">307</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">308</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">309</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">310</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">311</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">312</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">313</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">314</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">315</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">316</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">317</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">318</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">319</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">320</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">321</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">322</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">323</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">324</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">325</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">326</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">327</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">328</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">329</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">330</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">331</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">332</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">333</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">334</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">335</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">336</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">337</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">338</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">339</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">340</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">341</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">342</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">343</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">344</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">345</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">346</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">347</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">348</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">349</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">350</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">oversegment_part_return_list</span>(quotientgraph, list_quotient_node_to_work<span style="color: #666">=</span>[], average_size_cluster<span style="color: #666">=20</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Clusters points in a point cloud graph and updates the quotient graph nodes.</span>

<span style="color: #BA2121; font-style: italic">    This function performs clustering on nodes within specified quotient graph nodes and updates</span>
<span style="color: #BA2121; font-style: italic">    their associated quotient graph labels based on the clustering results. The updated</span>
<span style="color: #BA2121; font-style: italic">    quotient graph integrates new labels for further processing.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    quotientgraph : object</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph, which contains the point cloud graph structure (`point_cloud_graph`)</span>
<span style="color: #BA2121; font-style: italic">        and nodes to be updated with new labels.</span>
<span style="color: #BA2121; font-style: italic">    list_quotient_node_to_work : list, optional</span>
<span style="color: #BA2121; font-style: italic">        A list of quotient graph nodes to be processed. The nodes within these quotient graph</span>
<span style="color: #BA2121; font-style: italic">        nodes are clustered and updated. Default is an empty list.</span>
<span style="color: #BA2121; font-style: italic">    average_size_cluster : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The average number of points per cluster, used to determine the desired number of</span>
<span style="color: #BA2121; font-style: italic">        clusters during the clustering process. Default is 20.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    list</span>
<span style="color: #BA2121; font-style: italic">        A list of point cloud graph nodes (from the quotient graph node updates)</span>
<span style="color: #BA2121; font-style: italic">        that were processed and are available for subsequent operations.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    lw <span style="color: #666">=</span> list_quotient_node_to_work
    G <span style="color: #666">=</span> quotientgraph<span style="color: #666">.</span>point_cloud_graph
    <span style="color: #3D7B7B; font-style: italic"># make list of nodes inside the different quotient graph nodes to work with</span>
    list_of_nodes <span style="color: #666">=</span> []
    <span style="color: #008000; font-weight: bold">for</span> qnode <span style="color: #A2F; font-weight: bold">in</span> lw:
        list_of_nodes_each <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #A2F; font-weight: bold">in</span> G<span style="color: #666">.</span>nodes(data<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>) <span style="color: #008000; font-weight: bold">if</span> y[<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">==</span> qnode]
        list_of_nodes <span style="color: #666">+=</span> list_of_nodes_each

    <span style="color: #3D7B7B; font-style: italic"># get all the x,y,z coordinates in an np.array</span>
    Xcoord <span style="color: #666">=</span> np<span style="color: #666">.</span>zeros((<span style="color: #008000">len</span>(list_of_nodes), <span style="color: #666">3</span>))
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(list_of_nodes)):
        Xcoord[i] <span style="color: #666">=</span> G<span style="color: #666">.</span>nodes[list_of_nodes[i]][<span style="color: #BA2121">&#39;pos&#39;</span>]

    <span style="color: #3D7B7B; font-style: italic"># determine a number of cluster we would like to have</span>
    number_of_points <span style="color: #666">=</span> <span style="color: #008000">len</span>(list_of_nodes)
    number_of_clusters <span style="color: #666">=</span> number_of_points <span style="color: #666">/</span> average_size_cluster

    <span style="color: #3D7B7B; font-style: italic"># clustering via Kmeans to obtain new labels</span>
    clustering <span style="color: #666">=</span> skc<span style="color: #666">.</span>KMeans(n_clusters<span style="color: #666">=</span><span style="color: #008000">int</span>(number_of_clusters), init<span style="color: #666">=</span><span style="color: #BA2121">&#39;k-means++&#39;</span>, n_init<span style="color: #666">=20</span>, max_iter<span style="color: #666">=300</span>,
                            tol<span style="color: #666">=0.0001</span>)<span style="color: #666">.</span>fit(Xcoord)
    clustering_labels <span style="color: #666">=</span> clustering<span style="color: #666">.</span>labels_[:, np<span style="color: #666">.</span>newaxis] <span style="color: #666">+</span> <span style="color: #008000">max</span>(quotientgraph<span style="color: #666">.</span>nodes) <span style="color: #666">+</span> <span style="color: #666">1</span>

    <span style="color: #3D7B7B; font-style: italic"># Integration of the new labels in the quotient graph and updates</span>
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(list_of_nodes)):
        G<span style="color: #666">.</span>nodes[list_of_nodes[i]][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">=</span> clustering_labels[i]
    quotientgraph<span style="color: #666">.</span>rebuild(G)

    <span style="color: #3D7B7B; font-style: italic"># return of the list of nodes in pointcloudgraph to keep working with them</span>
    list_of_nodes_pointcloudgraph <span style="color: #666">=</span> list_of_nodes
    <span style="color: #008000; font-weight: bold">return</span> list_of_nodes_pointcloudgraph
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.resegment_nodes_with_elbow_method" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">resegment_nodes_with_elbow_method</span>


<a href="#spectral_clustering.split_and_merge.resegment_nodes_with_elbow_method" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>resegment_nodes_with_elbow_method(QG, QG_nodes_to_rework<span style="color: #666">=</span>[], number_of_cluster_tested<span style="color: #666">=10</span>, attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;norm_gradient&#39;</span>, number_attribute<span style="color: #666">=1</span>, standardization<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>, numer<span style="color: #666">=1</span>, G_mod<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>, export_div<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>, ret<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Resegments the nodes of a given quotient graph using the elbow method to find the optimal number of clusters.</p>
<p>This function takes a quotient graph and a list of nodes to rework, applies the elbow method to
resegment them into a more optimal clustering structure, and updates the graph accordingly. The
function uses k-means clustering for segmentation and provides an option to standardize certain
attributes prior to clustering.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#any">any</a></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph on which the resegmentation will be performed.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>QG_nodes_to_rework</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>, default:
                  <code>[]</code>
)
          –
          <div class="doc-md-description">
            <p>A list of quotient graph nodes to rework their clustering.
Defaults to an empty list.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>number_of_cluster_tested</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>10</code>
)
          –
          <div class="doc-md-description">
            <p>The maximum number of clusters to test using the elbow method.
Defaults to <code>10</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attribute</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;norm_gradient&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The node attribute used for clustering.
Defaults to <code>'norm_gradient'</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>number_attribute</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>1</code>
)
          –
          <div class="doc-md-description">
            <p>The dimensionality of the node attribute used for clustering.
Defaults to <code>1</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>standardization</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, the attributes used for clustering are standardized using StandardScaler.
Defaults to <code>False</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>numer</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>1</code>
)
          –
          <div class="doc-md-description">
            <p>An offset added to the new cluster labels.
Defaults to <code>1</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>G_mod</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True, modifies the original graph by updating the nodes with the new cluster labels.
Defaults to <code>True</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>export_div</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, exports the new clustered labels to text files.
Defaults to <code>False</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>ret</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, returns the cluster centers of the new segmentation.
Defaults to <code>False</code>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code>(<a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a>, optional)</code>
          –
          <div class="doc-md-description">
            <p>An array of the cluster centers, if <code>ret</code> is set to True and clustering is performed successfully.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">502</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">503</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">504</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">505</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">506</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">507</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">508</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">509</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">510</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">511</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">512</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">513</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">514</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">515</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">516</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">517</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">518</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">519</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">520</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">521</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">522</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">523</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">524</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">525</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">526</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">527</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">528</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">529</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">530</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">531</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">532</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">533</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">534</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">535</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">536</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">537</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">538</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">539</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">540</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">541</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">542</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">543</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">544</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">545</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">546</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">547</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">548</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">549</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">550</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">551</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">552</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">553</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">554</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">555</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">556</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">557</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">558</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">559</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">560</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">561</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">562</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">563</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">564</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">565</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">566</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">567</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">568</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">569</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">570</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">571</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">572</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">573</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">574</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">575</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">576</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">577</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">578</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">579</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">580</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">581</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">582</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">583</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">584</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">585</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">586</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">587</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">588</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">589</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">590</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">591</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">592</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">593</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">594</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">595</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">596</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">597</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">598</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">599</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">600</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">601</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">602</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">603</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">604</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">605</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">resegment_nodes_with_elbow_method</span>(QG, QG_nodes_to_rework<span style="color: #666">=</span>[], number_of_cluster_tested<span style="color: #666">=10</span>,
                                      attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;norm_gradient&#39;</span>, number_attribute<span style="color: #666">=1</span>, standardization<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>, numer<span style="color: #666">=1</span>,
                                      G_mod<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">True</span>, export_div<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>, ret<span style="color: #666">=</span><span style="color: #008000; font-weight: bold">False</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Resegments the nodes of a given quotient graph using the elbow method to find the optimal number of clusters.</span>

<span style="color: #BA2121; font-style: italic">    This function takes a quotient graph and a list of nodes to rework, applies the elbow method to</span>
<span style="color: #BA2121; font-style: italic">    resegment them into a more optimal clustering structure, and updates the graph accordingly. The</span>
<span style="color: #BA2121; font-style: italic">    function uses k-means clustering for segmentation and provides an option to standardize certain</span>
<span style="color: #BA2121; font-style: italic">    attributes prior to clustering.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    QG : any</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph on which the resegmentation will be performed.</span>
<span style="color: #BA2121; font-style: italic">    QG_nodes_to_rework : list, optional</span>
<span style="color: #BA2121; font-style: italic">        A list of quotient graph nodes to rework their clustering.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to an empty list.</span>
<span style="color: #BA2121; font-style: italic">    number_of_cluster_tested : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The maximum number of clusters to test using the elbow method.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to `10`.</span>
<span style="color: #BA2121; font-style: italic">    attribute : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The node attribute used for clustering.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to ``&#39;norm_gradient&#39;``.</span>
<span style="color: #BA2121; font-style: italic">    number_attribute : int, optional</span>
<span style="color: #BA2121; font-style: italic">        The dimensionality of the node attribute used for clustering.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to ``1``.</span>
<span style="color: #BA2121; font-style: italic">    standardization : bool, optional</span>
<span style="color: #BA2121; font-style: italic">        If True, the attributes used for clustering are standardized using StandardScaler.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to ``False``.</span>
<span style="color: #BA2121; font-style: italic">    numer : int, optional</span>
<span style="color: #BA2121; font-style: italic">        An offset added to the new cluster labels.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to ``1``.</span>
<span style="color: #BA2121; font-style: italic">    G_mod : bool, optional</span>
<span style="color: #BA2121; font-style: italic">        If True, modifies the original graph by updating the nodes with the new cluster labels.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to ``True``.</span>
<span style="color: #BA2121; font-style: italic">    export_div : bool, optional</span>
<span style="color: #BA2121; font-style: italic">        If True, exports the new clustered labels to text files.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to ``False``.</span>
<span style="color: #BA2121; font-style: italic">    ret : bool, optional</span>
<span style="color: #BA2121; font-style: italic">        If True, returns the cluster centers of the new segmentation.</span>
<span style="color: #BA2121; font-style: italic">        Defaults to ``False``.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    numpy.ndarray, optional</span>
<span style="color: #BA2121; font-style: italic">        An array of the cluster centers, if `ret` is set to True and clustering is performed successfully.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    G <span style="color: #666">=</span> QG<span style="color: #666">.</span>point_cloud_graph
    qg_values <span style="color: #666">=</span> nx<span style="color: #666">.</span>get_node_attributes(G, <span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>)
    maxi <span style="color: #666">=</span> <span style="color: #008000">max</span>(qg_values<span style="color: #666">.</span>values())
    num <span style="color: #666">=</span> maxi <span style="color: #666">+</span> numer
    <span style="color: #008000; font-weight: bold">for</span> i <span style="color: #A2F; font-weight: bold">in</span> QG_nodes_to_rework:
        sub <span style="color: #666">=</span> create_subgraphs_to_work(quotientgraph<span style="color: #666">=</span>QG, list_quotient_node_to_work<span style="color: #666">=</span>[i])
        SG <span style="color: #666">=</span> sub
        list_nodes <span style="color: #666">=</span> <span style="color: #008000">list</span>(SG<span style="color: #666">.</span>nodes)
        <span style="color: #3D7B7B; font-style: italic"># creation of matrices to work with in the elbow_method package</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">len</span>(SG<span style="color: #666">.</span>nodes) <span style="color: #666">&gt;</span> number_of_cluster_tested:
            Xcoord <span style="color: #666">=</span> np<span style="color: #666">.</span>zeros((<span style="color: #008000">len</span>(SG), <span style="color: #666">3</span>))
            <span style="color: #008000; font-weight: bold">for</span> u <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(SG)):
                Xcoord[u] <span style="color: #666">=</span> SG<span style="color: #666">.</span>nodes[<span style="color: #008000">list</span>(SG<span style="color: #666">.</span>nodes)[u]][<span style="color: #BA2121">&#39;pos&#39;</span>]
            Xnorm <span style="color: #666">=</span> np<span style="color: #666">.</span>zeros((<span style="color: #008000">len</span>(SG), number_attribute))
            <span style="color: #008000; font-weight: bold">for</span> u <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(SG)):
                Xnorm[u] <span style="color: #666">=</span> SG<span style="color: #666">.</span>nodes[<span style="color: #008000">list</span>(SG<span style="color: #666">.</span>nodes)[u]][attribute]

            <span style="color: #008000; font-weight: bold">if</span> standardization:
                sc <span style="color: #666">=</span> StandardScaler()
                Xnorm <span style="color: #666">=</span> sc<span style="color: #666">.</span>fit_transform(Xnorm)

            <span style="color: #3D7B7B; font-style: italic"># Instantiate the clustering model and visualizer</span>
            model <span style="color: #666">=</span> KMeans()
            visualizer <span style="color: #666">=</span> KElbowVisualizer(model, k<span style="color: #666">=</span>(<span style="color: #666">1</span>, number_of_cluster_tested), metric<span style="color: #666">=</span><span style="color: #BA2121">&#39;distortion&#39;</span>)

            visualizer<span style="color: #666">.</span>fit(Xnorm)  <span style="color: #3D7B7B; font-style: italic"># Fit the data to the visualizer</span>
            <span style="color: #3D7B7B; font-style: italic"># visualizer.show()        # Finalize and render the figure</span>
            <span style="color: #3D7B7B; font-style: italic"># Resegment and actualize the pointcloudgraph</span>
            k_opt <span style="color: #666">=</span> visualizer<span style="color: #666">.</span>elbow_value_
            <span style="color: #008000">print</span>(k_opt)
            <span style="color: #008000; font-weight: bold">if</span> k_opt <span style="color: #666">&gt;</span> <span style="color: #666">1</span>:
                clustering <span style="color: #666">=</span> skc<span style="color: #666">.</span>KMeans(n_clusters<span style="color: #666">=</span>k_opt, init<span style="color: #666">=</span><span style="color: #BA2121">&#39;k-means++&#39;</span>, n_init<span style="color: #666">=20</span>, max_iter<span style="color: #666">=300</span>, tol<span style="color: #666">=0.0001</span>)<span style="color: #666">.</span>fit(
                    Xnorm)
                new_labels <span style="color: #666">=</span> np<span style="color: #666">.</span>zeros((<span style="color: #008000">len</span>(SG<span style="color: #666">.</span>nodes), <span style="color: #666">4</span>))
                new_labels[:, <span style="color: #666">0</span>:<span style="color: #666">3</span>] <span style="color: #666">=</span> Xcoord
                <span style="color: #008000; font-weight: bold">for</span> pt <span style="color: #A2F; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #008000">len</span>(list_nodes)):
                    new_labels[pt, <span style="color: #666">3</span>] <span style="color: #666">=</span> clustering<span style="color: #666">.</span>labels_[pt] <span style="color: #666">+</span> num
                    <span style="color: #008000; font-weight: bold">if</span> G_mod:
                        G<span style="color: #666">.</span>nodes[list_nodes[pt]][<span style="color: #BA2121">&#39;quotient_graph_node&#39;</span>] <span style="color: #666">=</span> new_labels[pt, <span style="color: #666">3</span>]
                num <span style="color: #666">+=</span> k_opt <span style="color: #666">+</span> <span style="color: #008000">len</span>(list_nodes)

                <span style="color: #3D7B7B; font-style: italic"># print(i, &#39; divided in &#39;, k_opt)</span>
                <span style="color: #008000; font-weight: bold">if</span> export_div:
                    np<span style="color: #666">.</span>savetxt(<span style="color: #BA2121">&#39;pcd_new_labels_&#39;</span> <span style="color: #666">+</span> <span style="color: #008000">str</span>(i) <span style="color: #666">+</span> <span style="color: #BA2121">&#39;.txt&#39;</span>, new_labels, delimiter<span style="color: #666">=</span><span style="color: #BA2121">&quot;,&quot;</span>)
                    indices <span style="color: #666">=</span> np<span style="color: #666">.</span>argsort(new_labels[:, <span style="color: #666">3</span>])
                    arr_temp <span style="color: #666">=</span> new_labels[indices]
                    np<span style="color: #666">.</span>array_split(arr_temp, np<span style="color: #666">.</span>where(np<span style="color: #666">.</span>diff(arr_temp[:, <span style="color: #666">3</span>]) <span style="color: #666">!=</span> <span style="color: #666">0</span>)[<span style="color: #666">0</span>] <span style="color: #666">+</span> <span style="color: #666">1</span>)
                    v <span style="color: #666">=</span> <span style="color: #666">0</span>
                    <span style="color: #008000; font-weight: bold">for</span> arr <span style="color: #A2F; font-weight: bold">in</span> arr_temp:
                        np<span style="color: #666">.</span>savetxt(<span style="color: #BA2121">&#39;pcd_new_labels_&#39;</span> <span style="color: #666">+</span> <span style="color: #008000">str</span>(i) <span style="color: #666">+</span> <span style="color: #008000">str</span>(v) <span style="color: #666">+</span> <span style="color: #BA2121">&#39;.txt&#39;</span>, arr, delimiter<span style="color: #666">=</span><span style="color: #BA2121">&quot;,&quot;</span>)
                        v <span style="color: #666">+=</span> <span style="color: #666">1</span>
                <span style="color: #008000; font-weight: bold">if</span> ret <span style="color: #A2F; font-weight: bold">is</span> <span style="color: #008000; font-weight: bold">True</span>:
                    cluster_c <span style="color: #666">=</span> clustering<span style="color: #666">.</span>cluster_centers_
                    <span style="color: #008000; font-weight: bold">return</span> cluster_c

            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;nothing to cluster&quot;</span>)
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.select_all_quotientgraph_nodes_from_pointcloudgraph_cluster" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">select_all_quotientgraph_nodes_from_pointcloudgraph_cluster</span>


<a href="#spectral_clustering.split_and_merge.select_all_quotientgraph_nodes_from_pointcloudgraph_cluster" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>select_all_quotientgraph_nodes_from_pointcloudgraph_cluster(G, QG, labelpointcloudgraph, attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;kmeans_labels&#39;</span>)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Select all quotient graph nodes corresponding to a specific point cloud graph cluster.</p>
<p>This function identifies and selects the quotient graph nodes which correspond to a
specific cluster in the point cloud graph. The selection is based on the provided
clustering labels and a specified attribute.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>G</code></b>
              (<code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a></code>)
          –
          <div class="doc-md-description">
            <p>The original point cloud graph containing the clustering labels.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>QG</code></b>
              (<code><a class="autorefs autorefs-external" title="networkx.Graph" href="https://networkx.org/documentation/stable/reference/classes/graph.html#networkx.Graph">Graph</a></code>)
          –
          <div class="doc-md-description">
            <p>The quotient graph derived from the point cloud graph.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>labelpointcloudgraph</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>The label of the cluster in the point cloud graph to be matched.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>attribute</code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;kmeans_labels&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The clustering attribute name used for matching, default is 'kmeans_labels'.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<b><code>list_leaves</code></b> (              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>
)          –
          <div class="doc-md-description">
            <p>A list of quotient graph nodes associated with the specific cluster label.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">471</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">472</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">473</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">474</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">475</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">476</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">477</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">478</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">479</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">480</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">481</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">482</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">483</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">484</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">485</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">486</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">487</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">488</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">489</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">490</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">491</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">492</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">493</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">494</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">495</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">496</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">497</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">498</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">499</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">select_all_quotientgraph_nodes_from_pointcloudgraph_cluster</span>(G, QG, labelpointcloudgraph, attribute<span style="color: #666">=</span><span style="color: #BA2121">&#39;kmeans_labels&#39;</span>):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Select all quotient graph nodes corresponding to a specific point cloud graph cluster.</span>

<span style="color: #BA2121; font-style: italic">    This function identifies and selects the quotient graph nodes which correspond to a</span>
<span style="color: #BA2121; font-style: italic">    specific cluster in the point cloud graph. The selection is based on the provided</span>
<span style="color: #BA2121; font-style: italic">    clustering labels and a specified attribute.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    G : networkx.Graph</span>
<span style="color: #BA2121; font-style: italic">        The original point cloud graph containing the clustering labels.</span>
<span style="color: #BA2121; font-style: italic">    QG : networkx.Graph</span>
<span style="color: #BA2121; font-style: italic">        The quotient graph derived from the point cloud graph.</span>
<span style="color: #BA2121; font-style: italic">    labelpointcloudgraph : int</span>
<span style="color: #BA2121; font-style: italic">        The label of the cluster in the point cloud graph to be matched.</span>
<span style="color: #BA2121; font-style: italic">    attribute : str, optional</span>
<span style="color: #BA2121; font-style: italic">        The clustering attribute name used for matching, default is &#39;kmeans_labels&#39;.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    list_leaves : list</span>
<span style="color: #BA2121; font-style: italic">        A list of quotient graph nodes associated with the specific cluster label.</span>

<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    <span style="color: #3D7B7B; font-style: italic"># Select clusters that were associated with the smallest value of kmeans centroid.</span>
    compute_quotient_graph_mean_attribute_from_points(G, QG, attribute<span style="color: #666">=</span>attribute)
    list_leaves <span style="color: #666">=</span> [x <span style="color: #008000; font-weight: bold">for</span> x <span style="color: #A2F; font-weight: bold">in</span> QG<span style="color: #666">.</span>nodes() <span style="color: #008000; font-weight: bold">if</span> QG<span style="color: #666">.</span>nodes[x][attribute <span style="color: #666">+</span> <span style="color: #BA2121">&#39;_mean&#39;</span>] <span style="color: #666">==</span> labelpointcloudgraph]
    <span style="color: #008000; font-weight: bold">return</span> list_leaves
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="spectral_clustering.split_and_merge.select_minimum_centroid_class" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">select_minimum_centroid_class</span>


<a href="#spectral_clustering.split_and_merge.select_minimum_centroid_class" class="headerlink" title="Permanent link">Link</a></h2>
<div class="language-python doc-signature highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>select_minimum_centroid_class(clusters_centers)
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Selects the label of the cluster with the minimum centroid value.</p>
<p>This function identifies the cluster with the smallest centroid
value from the provided array of cluster centroids and returns
the corresponding cluster label.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>clusters_centers</code></b>
              (<code><a class="autorefs autorefs-external" title="numpy.ndarray" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray">ndarray</a></code>)
          –
          <div class="doc-md-description">
            <p>A 1D numpy array containing the centroid values of all clusters.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          –
          <div class="doc-md-description">
            <p>The label of the cluster with the smallest centroid value.</p>
          </div>
        </li>
    </ul>

            <details class="quote">
              <summary>Source code in <code>spectral_clustering/split_and_merge.py</code></summary>
              <div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">448</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">449</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">450</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">451</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">452</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">453</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">454</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">455</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">456</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">457</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">458</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">459</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">460</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">461</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">462</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">463</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">464</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">465</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">466</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">467</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">468</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span><span style="color: #BBB"> </span><span style="color: #00F">select_minimum_centroid_class</span>(clusters_centers):
<span style="color: #BBB">    </span><span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;</span>
<span style="color: #BA2121; font-style: italic">    Selects the label of the cluster with the minimum centroid value.</span>

<span style="color: #BA2121; font-style: italic">    This function identifies the cluster with the smallest centroid</span>
<span style="color: #BA2121; font-style: italic">    value from the provided array of cluster centroids and returns</span>
<span style="color: #BA2121; font-style: italic">    the corresponding cluster label.</span>

<span style="color: #BA2121; font-style: italic">    Parameters</span>
<span style="color: #BA2121; font-style: italic">    ----------</span>
<span style="color: #BA2121; font-style: italic">    clusters_centers : numpy.ndarray</span>
<span style="color: #BA2121; font-style: italic">        A 1D numpy array containing the centroid values of all clusters.</span>

<span style="color: #BA2121; font-style: italic">    Returns</span>
<span style="color: #BA2121; font-style: italic">    -------</span>
<span style="color: #BA2121; font-style: italic">    int</span>
<span style="color: #BA2121; font-style: italic">        The label of the cluster with the smallest centroid value.</span>
<span style="color: #BA2121; font-style: italic">    &quot;&quot;&quot;</span>
    mincluster <span style="color: #666">=</span> np<span style="color: #666">.</span>where(clusters_centers <span style="color: #666">==</span> np<span style="color: #666">.</span>amin(clusters_centers))
    labelmincluster <span style="color: #666">=</span> mincluster[<span style="color: #666">0</span>][<span style="color: #666">0</span>]
    <span style="color: #008000; font-weight: bold">return</span> labelmincluster
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      The ROMI project has received funding from the European Community’s H2020 Programme under Grant Agreement No. 773875.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ROMI_EU_PROJECT" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/ROMIEUProject" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/romi/spectral-clustering" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/repository/docker/roboticsmicrofarms/plantimager/general" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../../../assets/_markdown_exec_pyodide.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="https://buttons.github.io/buttons.js"></script>
      
    
  </body>
</html>